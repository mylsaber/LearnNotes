## Linux目录结构
- /bin (/usr/bin usr/local/bin)存放常用指令
- /sbin (/usr/sbin usr/local/sbin)存放的是系统管理员使用的系统管理程序
- /home 存放普通用户的主目录，在Linux中每个用户都有一个自己的目录，一般以用户账号命名
- /root 系统管理员目录，也称作超级用户的用户主目录
- /lib 系统开机所需要的最基本的动态连接共享库，几乎所有的应用程序都需要用到这些共享库
- /lost+found 系统非法关机后，存放文件的地方
- /etc 系统管理所需要的配置文件和子目录，比如安装MySQL数据库my.conf
- /usr 用户的很多应用程序和文件都放在这个目录下，类似windows的program Files目录
- /boot 存放的是启动Linux时使用的一些核心文件，包括一些连接文件及镜像文件
- /proc 虚拟目录，它是系统内存的映射，访问这个目录来获取系统信息
- /srv service的缩写，存放一些服务启动后需要提取的数据
- /sys 这个目录安装了2.6内核中新出现的一个文件系统sysfs
- /tmp 这个目录用来存放一些临时文件
- /dev 把所有的硬件用文件的形式存储
- /media Linux系统会自动识别一些设备。u盘，光驱等，识别后，Linux会把识别的设备挂载到这个目录下
- /mnt 系统提供该目录是为了让用户临时挂载别的文件系统的，我们可以将外部的存储挂载在/mnt/上，然后进入该目录就可以查看里面的内容了
- /opt 这是给主机额外安装软件的目录。如安装Oracle数据库就可以放到该目录下，默认为空
### 具体的目录结构
- /usr/local 这是另外一个给主机额外安装软件的目录，一般是通过编译源码方式安装的程序
- /var 存放着不断扩充着的东西，习惯将经常被修改的目录放在这个目录下，包括各种日志文件
- /selinux (security-enhanced linux) SELinux是一种安全子系统，他能控制程序只能访问特定文件，有三种工作模式，可以自行设定
## vim常用三种模式
- 正常模式，
- 输入i或者a进入编辑模式，esc退出编辑模式
- 输入:或者/进入命令模式，:wq（保存退出）:q（退出） :q!（强制退出，不保存）
### 快捷键
1. 拷贝当前行 yy，拷贝当前行向下5行 5yy，并粘贴 p
2. 删除当前行 dd，删除当前行及向下5行 5dd
3. 文件中查找 命令模式输入关键字并回车，输入n查找下一个
4. 设置文件行号，:set nu 取消文件行号:set nonu
5. 正常模式下，输入G到文档末尾，gg 到文档开头
6. 撤销 u
7. 在正常模式下，输入行数，shift + g 快速定位光标到行
## 关机&重启命令
- shutdown -h now 立刻进行关机
- shutdown -h 1 “hello，1分钟后关机”
- shutdown -r now 重启
- halt 关机，作用和上面一样
- reboot 立刻重启
- sync 内存数据同步到磁盘
## 用户登录&注销
- su - 用户名 ：登录
- logout 注销
## 用户管理
- 添加用户 useradd [-d 指定目录] 用户名
- 指定/修改密码 passwd 用户名
- 删除用户 userdel [-r] 用户名：加上-r删除home下目录
- 查询用户信息 id 用户名
- who am i 显示第一次登陆用户
### 用户组
- 添加组 groupadd 组名
- 删除组 groupdel 组名
- 增加用户时直接加上组 useradd -g 用户组 用户名
- 修改用户组 usermod -g 用户组 用户名
### 用户和组相关文件
- /etc/passwd文件，用户配置文件，记录用户信息
- /etc/shadow文件，口令配置文件
- /etc/group文件，组配置文件，记录Linux包含的组信息
## Linux实用指令
- 指令运行级别
  - 0：关机
  - 1：单用户[找回丢失密码]
  - 2：多用户状态没有网络服务
  - 3：多用户状态有网络服务
  - 4：系统未使用保留给用户
  - 5：图形界面
  - 6：系统重启
  - 常用级别是3和5，也可以指定默认运行级别，systemctl get-default：获取当前运行级别，systemctl set-default：设置运行级别。multi-user.target等同于3，graphical.target等同于5
  - init [0123456]：通过init来切换不同运行级别
- 帮助命令
  - man [命令或配置文件] ：获得帮助信息
  - help 命令：获得shell内置命令的帮助信息
 - 文件目录类
   - pwd：显示当前目录的绝对路径
   - ls [选项] [目录或者文件] -a显示所有文件、目录，包括隐藏的，-l列表方式显示信息
   - cd [参数] 切换到指定目录，cd ~或者cd : 回到用户家目录
   - mkdir [选项] 目录名 ：创建目录，-p：创建多级目录
   - rmdir [选项] 空目录 ：删除指定空目录
   - rm -rf 目录 ：强制删除目录
   - touch ：创建空文件
   - cp [选项] 源文件 目标目录：拷贝文件到指定目录，-r:递归复制整个文件夹，\cp：强制覆盖不提示
   - rm [选项] 文件或目录：删除，-r：递归删除，-f：强制删除不提示
   - mv 移动文件与目录或者重命名，mv oldNameFile newNameFile（重命名），mv /temp/movefile /targetFolder（移动文件）
   - cat [选项] 文件名 |more：查看文件内容，-n：显示行号，more指令是一个基于vi编辑器的文本过滤器，more内置若干指令，空格：向下翻一页，enter：向下一行，q：立刻离开，Ctrl+f：向下滚动一屏，Ctrl+b返回上一屏，=显示当前行号，:f ：输出文件名和当前行号
   - less 文件名：分屏查看文件内容，与more类似，根据显示加载内容，显示大型文件具有较高效率：空格：向下翻页，pagedown：向下翻动，pageup：向上翻动，/字符：向下搜索字符，n向下查找，N向上查找，?字符：向上查找字符，n向上查找，N向下查找，q离开
   - echo [选项] 输出内容：输出内容到控制台，
   - head [-n 5] 文件 ：查看文件开头10行内容，可以指定行数
   - tail [-n 5] 文件 ：查看文件结尾10行内容，可以指定行数，tail -f 文件：可以实时追踪该文档的所有更新
   - ·>输出重定向,>>追加
   - ln ：软链接也称符号链接，类似于windows里的快捷方式，主要存放了链接其他文件的路径。例如 ln -s [源文件或目录] [软链接名]
   - history [3] 查看执行过的历史命令，可以指定数量，！+编号：执行历史命令
- 时间日期类
  - date ["+%Y-%m-%d %H:%M:%S"]显示当前时间,date -s ["+%Y-%m-%d %H:%M:%S"]设置时间
  - cal [选项]：显示日历，cal -y显示今年日历，cal 2021显示指定年日历
- 搜索查找类
  - find [搜索范围] [选项]  ：从指定目录向下递归查找满足条件的文件或者目录，选项：-name指定文件名查找，-user查找指定用户名所以文件，-size +200M指定文件大小查找，+代表大于，-代表小于，单位有k，M，G
  - locate 指定快速定位文件路径。
  - which：查看某个指令那个目录下
  - grep：过滤查找，和管道符号|一起使用，表示将前一个命令的处理结果输出传递给后面的命令处理。grep [选项] 查找内容 源文件，常用选项：-n显示匹配行及行号，-i忽略字母大小写
- 压缩&解压
  - gzip/gunzip:压缩解压文件
  - zip/unzip：压缩文件或文件夹，zip [选项] xxx.zip,unzip [选项] xxx.zip，zip常用选项：-r递归压缩，unzip常用选项：-d指定目录
  - tar [选项] xxx.tar.gz 打包的内容：选项-c产生.tar打包文件，-v显示详细信息，-f指定压缩后的文件名，-z打包同时压缩，-x解包.tar文件
## 权限管理
- 文件所有者
  - ls -ahl 查看文件目录的所有者，组
  - chown 用户名 文件名：修改文件所有者
  - chgrp 组名 文件名：修改文件组
- 用户组
  - usermod -g 新组名 用户名：改变用户组
  - usermod -d 目录名 用户名：改变用户登录初始目录
- 权限的基本介绍
  - ls -l中显示的内容：-rw-rw-r--. 1 mylsaber mylsaber 0 10月 31 17:21 yes.txt
    - 第0位确定文件类型（d，-，l，c，b）
      1. l表示链接
      2. d表示目录
      3. c是字符设备文件，例如鼠标键盘
      4. b是块设备，比如硬盘
      5. -表示普通文件
    - 1-3确定所有者权限
    - 4-6确定所属组权限
    - 7-9确定其他用户权限
    - rwx作用到文件
      1. r：可读
      2. w：可写，但是不代表可以删除该文件，删除一个文件的前提条件是对该文件所在目录又写权限
      3. x：可执行
    - rwx作用到目录
      1. r：可读
      2. w：可写：可以对目录内创建、删除、重命名目录
      3. x：代表可以进入该目录
  - 修改权限
    - 通过chmod指令，可以修改文件或者目录的权限
      - 第一种方式：+，-，= 变更权限，u：所有者，g：所有组，o：其他人，a：所有人
        1. chmod u=rwx，g=rw，o=x 文件/目录名
        2. chmod o+w 文件/目录名
        3. chmod a-x 文件/目录名
      - 第二种方式：通过数字变更权限
        1. chmod 751 文件/目录名，r=4，w=2，x=1
  - 修改所有者
    - chown newowner 文件/目录 --修改所有者
    - chown newowner：newgroup 文件/目录 --修改所有者和组
    - -r 如果是目录，则使其下所有子文件和目录递归生效
  - 修改文件/目录所在组
    - chgrp newgroup 文件/目录 --改变文件/目录所在组
## 任务调度
- 任务调度
  - crontab -e ：设置个人任务调度
    - */1 * * * *  ls -l /etc/ &gt; /tmp/to.txt :表示每个小时的每分钟执行ls -l /etc/ &gt; /tmp/to.txt命令
    - 第一个&quot;*&quot;：一个小时的第几分钟，0-59
    - 第二个&quot;*&quot;：一天中的第几小时，0-23
    - 第三个&quot;*&quot;：一个月中的第几天，1-31
    - 第四个&quot;*&quot;：一年中的第几个月，1-12
    - 第四个&quot;*&quot;：一周中的星期几，0-7（0和7都表示周日）
    - &quot;*&quot;表示任何时间，比如第一个就表示每分钟都执行一次
    - &quot;,&quot;表示不连续时间，比如&quot;0 8,12,16 * * * 命令&quot;，就表示每天的8点0分，12点0分，16点0分都执行一次
    - &quot;-&quot;表示连续时间，比如&quot;0 5 * * 1-6 命令&quot;，表示周一到周六每天5点0分执行一次
    - */n：表示每隔多久执行一次，&quot; */10 * * * * 命令&quot;，表示每隔10分钟执行一次
  - crontab -r：终止任务调度
  - crontab -l：列出当前有哪些任务调度
  - service crond restart：重启任务调度
- 定时任务
  - 基本介绍
    1. at命令是一次性定时计划任务，at的守护进程atd会以后台模式运行，检查作业队列来运行
    2. 默认情况下，atd守护进程每60秒检查作业队列，有作业时，会检查作业运行时间，如果时间与当前时间匹配，则运行此作业。
    3. at命令是一次性定时任务计划。
    4. 使用at命令时，要保证atd进程的启动，可以使用相关指令查看，ps -ef | grep atd
  - 命令格式
    1. at [选项] [时间]
      - 时间定义
        1. hh:mm(小时：分钟)，如果时间过了，则第二天执行
        2. 使用midnight（深夜），noon（中午），teatime（4点）
        3. 12pm（下午12点），12am
        4. 指定具体日期，month day或mm/dd/yy或dd.mm.yy，指定的日期必须在指定时间后面。例如04:00 2021-03-01
        5. now +count time-units ，时间单位可以是minutes，hours，days，weeks，例如：now + 5minutes
        6. 直接使用today，tomorrow
    2. Ctrl+D 结束at命令的输入
    3. atq：查看有没有执行的工作任务
    4. atrm 编号：删除已经设置的定时任务
## Linux分区
- 原理介绍
  1. Linux无论几个分区，归根结底只有一个根目录，一个独立且唯一的文件结构，Linux中每个分区都是用来组成整个文件系统的一部分。
  2. Linux采用了一种叫“载入”的处理方法，它的整个文件系统中包含了一整套的文件和目录，且将一个分区和一个目录联系起来，要载入一个分区将使它的存储空间在一个目录下获得。
- 查看所有设备挂载情况
  1. lsblk 或 lsblk -f
- 分区挂载案例
  1. fdisk /dev/sdb：分区命令
    - m：显示命令列表
    - p：显示磁盘分区 同fdisk -l
    - n：新增分区
    - d：删除分区
    - w：写入并退出
    - q：退出不保存
  2. mkfs -t ext4 /dev/sdb1：格式化分区
  3. mount /dev/sdb1 挂载目录：挂载目录
  4. umount /dev/sdb1 或者umount 挂载目录：卸载挂载
  5. 命令行挂载重启后会失效
  6. 通过修改/etc/fstab实现永久挂载，添加完成后执行mount -a 立即生效
- 磁盘情况查询
  - df -h：查询磁盘使用情况
  - 查询指定目录磁盘占用，
    1. du -h 目录：查询指定目录磁盘占用，默认当前目录
    2. -s：指定目录占用大小汇总
    3. -h：带计量单位
    4. -a：含文件
    5. -c：列出明细的同时，增加汇总值
    6. --max-depth=1：子目录深度
  - 磁盘实用指令
    1. ls -l /opt | grep "^-" | wc -l：统计/opt文件夹下文件的个数
    2. ls -l /opt | grep "^d" | wc -l：统计/opt文件夹下目录的个数
    3. ls -lR /opt | grep "^-" | wc -l：统计/opt文件夹下文件的个数，包括子文件夹
    4. ls -lR /opt | grep "^d" | wc -l：统计/opt文件夹下目录的个数，包括子文件夹
    5. tree 目录名：树状显示目录结构
## Linux网络配置
- 配置指定ip
  1. vim /etc/sysconfig/network-scripts/ifcfg-ens33
- 设置主机名
  1. vim /etc/hostname
## 进程管理
- 基本介绍
  - 在Linux中，每个执行的程序都称为一个进程，每个进程都分配一个ID号（pid，进程号）。
  - 每个进程都可能以前台或者后台方式存在。
- 显示系统进程
  - ps -a：显示当前终端的所有进程信息
  - ps -u：以用户的格式显示进程信息
  - ps -x：显示后台进程运行的参数
  - ps详解
    1. USER：用户名称
    2. PID：进程号
    3. %CPU：CPU占用百分比
    4. %MEM：物理内存百分比
    5. VSZ：占用虚拟内存大小（单位：KB）
    6. RSS：占用物理内存大小（单位：KB）
    7. TTY：终端名称
    8. STAT：进程状态，S-睡眠，s-表示该进程是会话的先导进程，N-表示进程拥有比普通优先级更低的优先级，R-正在运行，D-短期等待，Z-僵死进程，T-被跟踪或者被停止等等
    9. STARTED：进程的启动时间
    10. TIME：CPU使用时间
    11. COMMAND：启动进程所用的命令和参数，过长会被截断显示
  - ps -ef：全格式显示当前进程信息，e显示所有进程，f全格式
  - pstree [选项]，显示进程树，-p显示进程PID，-u显示进程所属用户
- 终止进程
  - kill [选项] 进程号
    - 常用选项
      - -9：强迫进程立即停止
  - killall 进程名称（通过进程名杀死进程，支持通配符，在系统因负载过大而变得很慢时很有用）
- 服务管理
  - 服务（service）管理
    - 使用setup-&gt;系统服务，就可以看到全部
    - /etc/init.d看到service指令管理的服务，ls -l /etc/init.d
  - chkconfig指令
    - 可以给服务的各个运行级别设置自启动/关闭
    - chkconfig指令的服务在/etc/init.d查看
    - 基本语法
      - chkconfig --list [| grep xxx]：查看服务
      - chkconfig 服务名 --list
      - chkconfig --level 5 服务名 on/off
  - systemctl指令
    - systemctl [start | stop | restart | status] 服务名
    - systemctl指令管理的服务在/usr/lib/systemd/system查看
    - systemctl设置服务的自启动状态
      - systemctl list-unit-files [| grep 服务名]（查看服务开机启动状态，grep过滤）
      - systemctl enable 服务名（设置开机启动）
      - systemctl disable 服务名 （关闭开机启动）
      - systemctl is-enabled 服务名（查询是否自启动）
  - 打开或者关闭指定端口
    - firewall-cmd --permanent --add-port=端口号/协议
    - firewall-cmd --permanent --remove-port=端口号/协议
    - firewall-cmd --reload：打开或者关闭端口后要重载生效
    - firewall-cmd --query-port=端口号/协议
  - 动态监控进程
    - top [选项]
      - -d：指定几秒更新，默认3秒
      - -i不显示闲置或者僵死进程
      - -p通过id
    - 交互操作
      - P：以CPU使用频率排序，默认
      - M：内存使用率排序
      - N：PID排序
      - q：退出
      - u：然后输入用户名，监视指定用户
      - k：输入PID，终止进程
  - 监控网络状态
    - netstat [选项]
      - -an：按一定顺序排列输出
      - -p：显示那个进程在调用
    - ping ip地址：检测两机网络
## rpm包管理
- rpm -qa：查询所有已安装rpm软件包
- rpm -q 软件包名：查询软件包是否安装
- rpm -qi 软件包名：查询软件信息
- rpm -ql 软件包名：查询软件包中的文件
- rpm -qf 文件全路径名：查询文件所属的软件包
- rpm -e 软件包名：卸载rpm包
- rpm -ivh rpm包全路径名称
  - i=install：安装
  - v=verbose：提示
  - h=hash：进度条
- yum
  - yum是一个shell前端软件包管理器，基于rpm包管理，能从指定的服务器自动下载rpm包并安装，可以自动处理依赖关系，并且一次安装所有依赖软件包
  - yum list|grep 软件包名：查询服务器是否有指定软件包
  - yum install 软件包名：下载安装软件包