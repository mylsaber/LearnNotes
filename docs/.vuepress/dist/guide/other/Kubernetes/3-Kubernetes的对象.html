<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>1 对象概述 | 迪</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/logo.jpg">
    <meta name="description" content="迪的文档">
    
    <link rel="preload" href="/assets/css/0.styles.d6ad21ed.css" as="style"><link rel="preload" href="/assets/js/app.7bd49d80.js" as="script"><link rel="preload" href="/assets/js/2.63c13255.js" as="script"><link rel="preload" href="/assets/js/62.b85288fb.js" as="script"><link rel="prefetch" href="/assets/js/10.3494fc42.js"><link rel="prefetch" href="/assets/js/11.729c2ddc.js"><link rel="prefetch" href="/assets/js/12.2cbdbb2e.js"><link rel="prefetch" href="/assets/js/13.d9240596.js"><link rel="prefetch" href="/assets/js/14.482de4d9.js"><link rel="prefetch" href="/assets/js/15.5aafb57e.js"><link rel="prefetch" href="/assets/js/16.d8b25bdc.js"><link rel="prefetch" href="/assets/js/17.c59992e9.js"><link rel="prefetch" href="/assets/js/18.84364966.js"><link rel="prefetch" href="/assets/js/19.a2c00930.js"><link rel="prefetch" href="/assets/js/20.a708eb81.js"><link rel="prefetch" href="/assets/js/21.43accc43.js"><link rel="prefetch" href="/assets/js/22.f62a2950.js"><link rel="prefetch" href="/assets/js/23.34d0cd46.js"><link rel="prefetch" href="/assets/js/24.5338688c.js"><link rel="prefetch" href="/assets/js/25.49e53738.js"><link rel="prefetch" href="/assets/js/26.16ae9f2c.js"><link rel="prefetch" href="/assets/js/27.3a6d8ae8.js"><link rel="prefetch" href="/assets/js/28.c1d13fc9.js"><link rel="prefetch" href="/assets/js/29.6f2861b0.js"><link rel="prefetch" href="/assets/js/3.8a8baccb.js"><link rel="prefetch" href="/assets/js/30.e84371ac.js"><link rel="prefetch" href="/assets/js/31.5c72212f.js"><link rel="prefetch" href="/assets/js/32.6363355b.js"><link rel="prefetch" href="/assets/js/33.480aa18e.js"><link rel="prefetch" href="/assets/js/34.214d5115.js"><link rel="prefetch" href="/assets/js/35.e451acf7.js"><link rel="prefetch" href="/assets/js/36.40754204.js"><link rel="prefetch" href="/assets/js/37.c0669722.js"><link rel="prefetch" href="/assets/js/38.d21aec47.js"><link rel="prefetch" href="/assets/js/39.715eeabf.js"><link rel="prefetch" href="/assets/js/4.94733d25.js"><link rel="prefetch" href="/assets/js/40.11a9a769.js"><link rel="prefetch" href="/assets/js/41.36768ce0.js"><link rel="prefetch" href="/assets/js/42.ee1e0159.js"><link rel="prefetch" href="/assets/js/43.020fd64f.js"><link rel="prefetch" href="/assets/js/44.0c53e18b.js"><link rel="prefetch" href="/assets/js/45.4f3ef7b5.js"><link rel="prefetch" href="/assets/js/46.d9cdb5f2.js"><link rel="prefetch" href="/assets/js/47.1adb3d38.js"><link rel="prefetch" href="/assets/js/48.610e96d6.js"><link rel="prefetch" href="/assets/js/49.55d8c57f.js"><link rel="prefetch" href="/assets/js/5.2ea06e07.js"><link rel="prefetch" href="/assets/js/50.6ebf433b.js"><link rel="prefetch" href="/assets/js/51.7c6b8f90.js"><link rel="prefetch" href="/assets/js/52.272766fb.js"><link rel="prefetch" href="/assets/js/53.376bcdaa.js"><link rel="prefetch" href="/assets/js/54.64b22200.js"><link rel="prefetch" href="/assets/js/55.88f31c2d.js"><link rel="prefetch" href="/assets/js/56.adf8ff90.js"><link rel="prefetch" href="/assets/js/57.aef54518.js"><link rel="prefetch" href="/assets/js/58.3fd47dd4.js"><link rel="prefetch" href="/assets/js/59.517e8369.js"><link rel="prefetch" href="/assets/js/6.8d81f0ec.js"><link rel="prefetch" href="/assets/js/60.e18cfb4f.js"><link rel="prefetch" href="/assets/js/61.cc67b7d0.js"><link rel="prefetch" href="/assets/js/63.d5389af7.js"><link rel="prefetch" href="/assets/js/64.07e60b5f.js"><link rel="prefetch" href="/assets/js/65.aa0ff0bb.js"><link rel="prefetch" href="/assets/js/66.8e29c5d3.js"><link rel="prefetch" href="/assets/js/67.4c0457e3.js"><link rel="prefetch" href="/assets/js/68.4a42bf9a.js"><link rel="prefetch" href="/assets/js/69.8615447c.js"><link rel="prefetch" href="/assets/js/7.2259505f.js"><link rel="prefetch" href="/assets/js/70.868370f7.js"><link rel="prefetch" href="/assets/js/71.c2d2d815.js"><link rel="prefetch" href="/assets/js/72.632399c5.js"><link rel="prefetch" href="/assets/js/73.32018efb.js"><link rel="prefetch" href="/assets/js/74.f9c48ad4.js"><link rel="prefetch" href="/assets/js/75.50fefe6a.js"><link rel="prefetch" href="/assets/js/76.ccc13674.js"><link rel="prefetch" href="/assets/js/77.59a643be.js"><link rel="prefetch" href="/assets/js/78.fe57d4be.js"><link rel="prefetch" href="/assets/js/79.900d03e3.js"><link rel="prefetch" href="/assets/js/8.8a6f0706.js"><link rel="prefetch" href="/assets/js/80.de0bd2c2.js"><link rel="prefetch" href="/assets/js/9.b3b9c71b.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d6ad21ed.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.jpg" alt="迪" class="logo"> <span class="site-name can-hide">迪</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/guide/back-end/java/java集合.html" class="nav-link">
  后端
</a></div><div class="nav-item"><a href="/guide/前端/JavaScript/ES6.html" class="nav-link">
  前端
</a></div><div class="nav-item"><a href="/guide/other/docker/Docker.html" class="nav-link">
  其他
</a></div><div class="nav-item"><a href="https://www.baidu.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  百度
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/language/chinese.html" class="nav-link">
  中文
</a></li><li class="dropdown-item"><!----> <a href="/language/english.html" class="nav-link">
  English
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/guide/back-end/java/java集合.html" class="nav-link">
  后端
</a></div><div class="nav-item"><a href="/guide/前端/JavaScript/ES6.html" class="nav-link">
  前端
</a></div><div class="nav-item"><a href="/guide/other/docker/Docker.html" class="nav-link">
  其他
</a></div><div class="nav-item"><a href="https://www.baidu.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  百度
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/language/chinese.html" class="nav-link">
  中文
</a></li><li class="dropdown-item"><!----> <a href="/language/english.html" class="nav-link">
  English
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>后端</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/back-end/java/java集合.html" class="sidebar-link">java集合</a></li><li><a href="/guide/back-end/java/多线程.html" class="sidebar-link">多线程</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>其他</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Docker</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading open"><span>Kubernetes</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/other/Kubernetes/1.Kubernetes部署.html" class="sidebar-link">1.Kubernetes部署</a></li><li><a href="/guide/other/Kubernetes/2-Kubernetes资源管理方式.html" class="sidebar-link">2.Kubernetes资源管理方式</a></li><li><a href="/guide/other/Kubernetes/3-Kubernetes的对象.html" class="active sidebar-link">3.Kubernetes的对象</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/other/Kubernetes/3-Kubernetes的对象.html#_4-1-概述" class="sidebar-link">4.1 概述</a></li><li class="sidebar-sub-header"><a href="/guide/other/Kubernetes/3-Kubernetes的对象.html#_4-2-name" class="sidebar-link">4.2 Name</a></li><li class="sidebar-sub-header"><a href="/guide/other/Kubernetes/3-Kubernetes的对象.html#_4-3-uid" class="sidebar-link">4.3 UID</a></li><li class="sidebar-sub-header"><a href="/guide/other/Kubernetes/3-Kubernetes的对象.html#_5-1-概述" class="sidebar-link">5.1 概述</a></li><li class="sidebar-sub-header"><a href="/guide/other/Kubernetes/3-Kubernetes的对象.html#_5-2-特点" class="sidebar-link">5.2 特点</a></li><li class="sidebar-sub-header"><a href="/guide/other/Kubernetes/3-Kubernetes的对象.html#_5-3-使用场景" class="sidebar-link">5.3 使用场景</a></li><li class="sidebar-sub-header"><a href="/guide/other/Kubernetes/3-Kubernetes的对象.html#_6-1-概述" class="sidebar-link">6.1 概述</a></li><li class="sidebar-sub-header"><a href="/guide/other/Kubernetes/3-Kubernetes的对象.html#_6-2-标签的语法" class="sidebar-link">6.2 标签的语法</a></li><li class="sidebar-sub-header"><a href="/guide/other/Kubernetes/3-Kubernetes的对象.html#_6-3-标签操作" class="sidebar-link">6.3 标签操作</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/other/Kubernetes/3-Kubernetes的对象.html#_6-3-1-添加标签" class="sidebar-link">6.3.1 添加标签</a></li><li class="sidebar-sub-header"><a href="/guide/other/Kubernetes/3-Kubernetes的对象.html#_6-3-2-更新标签" class="sidebar-link">6.3.2 更新标签</a></li><li class="sidebar-sub-header"><a href="/guide/other/Kubernetes/3-Kubernetes的对象.html#_6-3-3-删除标签" class="sidebar-link">6.3.3 删除标签</a></li></ul></li><li class="sidebar-sub-header"><a href="/guide/other/Kubernetes/3-Kubernetes的对象.html#_6-4-标签选择器" class="sidebar-link">6.4 标签选择器</a></li></ul></li><li><a href="/guide/other/Kubernetes/4-Kubernetes的Pod.html" class="sidebar-link">4.Kubernetes的Pod</a></li><li><a href="/guide/other/Kubernetes/5-Kubernetes的控制器.html" class="sidebar-link">5.Kubernetes的控制器</a></li><li><a href="/guide/other/Kubernetes/6-Kubernetes的Service.html" class="sidebar-link">6.Kubernetes的Service</a></li><li><a href="/guide/other/Kubernetes/7-Kubernetes的数据存储.html" class="sidebar-link">7.Kubernetes的数据存储</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>Linux</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/other/Linux/Linux.html" class="sidebar-link">Linux</a></li><li><a href="/guide/other/Linux/Linux基础.html" class="sidebar-link">Linux基础</a></li><li><a href="/guide/other/Linux/Shell脚本.html" class="sidebar-link">Shell脚本</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>项目管理</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/other/project-manage/git.html" class="sidebar-link">Git</a></li><li><a href="/guide/other/project-manage/maven.html" class="sidebar-link">Maven</a></li></ul></section></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_1-对象概述"><a href="#_1-对象概述" class="header-anchor">#</a> 1 对象概述</h1> <p>Kubernetes对象时持久化的实体。Kubernetes使用这些实体去表示整个集群的状态。比如它描述了如下信息：</p> <ul><li>哪些容器化应用正在运行（以及在哪些节点上运行）</li> <li>可以被应用使用的资源</li> <li>关于应用运行时表现的策略，比如重启策略，升级策略以及容错策略</li></ul> <p>Kubernetes对象时<strong>目标性记录</strong>——一旦创建该对象，Kubernetes系统将不断工作以确保该对象存在。通过创建对象，你就是在告知Kubernetes系统，你想要的集群工作负载状态看起来应该是什么样子的，简单来说，就是通过创建Kubernetes对象来描述集群的<strong>期望状态</strong>
操作Kubernetes对象，无论是创建、修改或则删除，都需要使用Kubernetes API。比如当使用<code>kubectl</code>命令接口（CLI）时，CLI会调用必要的Kubernetes API；也可以使用客户端库，来直接调用Kubernetes API
几乎每个Kubernetes对象包含两个嵌套的对象字段：</p> <ul><li>spec（规约）：必须在创建对象时设置其内容，描述你希望对象所具有的特征——<strong>期望状态</strong></li> <li>status（状态）：描述了对象的当前状态，它由Kubernetes系统设置并更新。使之达成<strong>期望状态</strong></li></ul> <h1 id="_2-描述对象"><a href="#_2-描述对象" class="header-anchor">#</a> 2 描述对象</h1> <p>创建Kubernetes对象时，必须提供对象的<strong>spec</strong>，用来描述对象的<strong>期望状态</strong>以及对象的基本信息。当使用Kubernetes API创建对象时，API请求必须包含JSON格式的对象信息，一般我们提供<code>yaml</code>文件给kubectl。kubectl在发起请求时，会自动转换为JSON格式。</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Deployment
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>deployment
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
      <span class="token key atrule">app</span><span class="token punctuation">:</span> nginx
  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">2</span> <span class="token comment"># 告知 Deployment 运行 2 个与该模板匹配的 Pod</span>
  <span class="token key atrule">template</span><span class="token punctuation">:</span>
    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
      <span class="token key atrule">labels</span><span class="token punctuation">:</span>
        <span class="token key atrule">app</span><span class="token punctuation">:</span> nginx
    <span class="token key atrule">spec</span><span class="token punctuation">:</span>
      <span class="token key atrule">containers</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> nginx
        <span class="token key atrule">image</span><span class="token punctuation">:</span> nginx<span class="token punctuation">:</span>1.14.2
        <span class="token key atrule">ports</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">containerPort</span><span class="token punctuation">:</span> <span class="token number">80</span>
</code></pre></div><p>使用声明式对象配置部署：</p> <div class="language-shell extra-class"><pre class="language-shell"><code>kubectl apply <span class="token parameter variable">-f</span> nginxpod.yaml
</code></pre></div><p>必要字段：</p> <ul><li><code>apiVersion</code>：创建该对象所使用的Kubernetes API版本</li> <li><code>kind</code>：创建对象的类别</li> <li><code>metadata</code>：帮助唯一标识对象的一些数据，包括一个<code>name</code>字符串，<code>UID</code>和可选的<code>namespace</code></li> <li><code>spec</code>：所期望的该对象的状态</li></ul> <h1 id="_3-创建kubernetes对象的yaml"><a href="#_3-创建kubernetes对象的yaml" class="header-anchor">#</a> 3 创建Kubernetes对象的yaml</h1> <ul><li>如果Kubernetes集群中已经存在了要创建的对象，可以使用<code>kubectl get</code>直接输出到yaml，然后去除status即可：</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code>kubectl get pod xxx <span class="token parameter variable">-o</span> yaml <span class="token operator">&gt;</span> demo.yaml
</code></pre></div><ul><li>如果Kubernetes集群没有要创建的对象，可以使用类似<code>kubectl run xxx --dry-run=client</code>输出yaml：</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code>kubectl run nginx-pod <span class="token parameter variable">--image</span><span class="token operator">=</span>nginx --dry-run<span class="token operator">=</span>client <span class="token parameter variable">-o</span> yaml <span class="token operator">&gt;</span> demo.yaml
</code></pre></div><h1 id="_4-对象名称"><a href="#_4-对象名称" class="header-anchor">#</a> 4 对象名称</h1> <h2 id="_4-1-概述"><a href="#_4-1-概述" class="header-anchor">#</a> 4.1 概述</h2> <p>Kubernetes REST API中，所有的对象都是通过<code>name</code>和<code>UID</code>唯一确定的。</p> <div class="language- extra-class"><pre class="language-text"><code>/api/v1/namespaces/{namespace}/pods/{name}
</code></pre></div><h2 id="_4-2-name"><a href="#_4-2-name" class="header-anchor">#</a> 4.2 Name</h2> <p>在同一个命名空间下，同一类型对象，可以通过name来确定唯一性。命名规则如下：</p> <ul><li>不超过253个字符。</li> <li>只能由小写字母、数字、减号<code>-</code>、小数点<code>.</code>组成。</li></ul> <h2 id="_4-3-uid"><a href="#_4-3-uid" class="header-anchor">#</a> 4.3 UID</h2> <p>由Kubernetes系统生成，唯一标识某个Kubernetes对象。Kubernetes中每创建一个对象，都有一个唯一的<code>UID</code>。用于区分多次创建的同名对象。（删除上一个对象后再次创建一个同名对象，<code>UID</code>不同）</p> <h1 id="_5-命名空间"><a href="#_5-命名空间" class="header-anchor">#</a> 5 命名空间</h1> <h2 id="_5-1-概述"><a href="#_5-1-概述" class="header-anchor">#</a> 5.1 概述</h2> <p>Kubernetes中命名空间是用来隔离对象资源的，默认情况下，会初始化四个命名空间：</p> <ul><li>default：所有没有指定 namespace 的对象都会被分配到此名称空间中。</li> <li>kube-node-lease：Kubernetes 集群节点之间的心跳维护，V 1.13 开始引入。</li> <li>kube-system：Kubernetes 系统创建的对象放在此名称空间中。</li> <li>kube-public：此名称空间是 Kubernetes 集群安装时自动创建的，并且所有的用户都可以访问（包括未认证的用户），主要是为集群预留的，如：在某些情况中，某些 Kubernetes 对象应用应该能被所有集群用户访问到。</li></ul> <h2 id="_5-2-特点"><a href="#_5-2-特点" class="header-anchor">#</a> 5.2 特点</h2> <p>资源隔离、网络不隔离。例如：配置文件不可以跨命名空间访问，但是网络可以跨命名空间访问。</p> <h2 id="_5-3-使用场景"><a href="#_5-3-使用场景" class="header-anchor">#</a> 5.3 使用场景</h2> <ul><li>环境隔离：dev（开发）、test（测试）、prod（生产）等。</li> <li>产品线隔离：前端、后端、ios、Android等。</li></ul> <h1 id="_6-标签和标签选择器"><a href="#_6-标签和标签选择器" class="header-anchor">#</a> 6 标签和标签选择器</h1> <h2 id="_6-1-概述"><a href="#_6-1-概述" class="header-anchor">#</a> 6.1 概述</h2> <p>标签是Kubernetes对象上一组键值对，标签可以用来按照用户自己的意图来组织和选择一组Kubernetes对象。我们可以在创建对象的时候添加标签，也可以在创建后添加。每个Kubernetes对象可以有多个标签。
对于多个包含相同标签的Kubernetes对象。可以通过使用标签选择器（label selector）来选择一组对象，标签选择器是Kubernetes中最主要的分类和筛选手段。</p> <h2 id="_6-2-标签的语法"><a href="#_6-2-标签的语法" class="header-anchor">#</a> 6.2 标签的语法</h2> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Pod
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>pod
  <span class="token key atrule">labels</span><span class="token punctuation">:</span> <span class="token comment"># 标签</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> nginx
    <span class="token key atrule">environment</span><span class="token punctuation">:</span> prod 
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">containers</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> nginx
    <span class="token key atrule">image</span><span class="token punctuation">:</span> nginx
</code></pre></div><h2 id="_6-3-标签操作"><a href="#_6-3-标签操作" class="header-anchor">#</a> 6.3 标签操作</h2> <h3 id="_6-3-1-添加标签"><a href="#_6-3-1-添加标签" class="header-anchor">#</a> 6.3.1 添加标签</h3> <div class="language-shell extra-class"><pre class="language-shell"><code>kubectl label pod nginx-pod <span class="token assign-left variable">hello</span><span class="token operator">=</span>world
</code></pre></div><h3 id="_6-3-2-更新标签"><a href="#_6-3-2-更新标签" class="header-anchor">#</a> 6.3.2 更新标签</h3> <div class="language-shell extra-class"><pre class="language-shell"><code>kubectl label pod nginx-pod <span class="token assign-left variable">hello</span><span class="token operator">=</span>java <span class="token parameter variable">--overwrite</span>
</code></pre></div><h3 id="_6-3-3-删除标签"><a href="#_6-3-3-删除标签" class="header-anchor">#</a> 6.3.3 删除标签</h3> <div class="language-shell extra-class"><pre class="language-shell"><code>kubectl label pod nginx-pod hello-
</code></pre></div><h2 id="_6-4-标签选择器"><a href="#_6-4-标签选择器" class="header-anchor">#</a> 6.4 标签选择器</h2> <p>Kubernetes的api-server支持两种形式的标签选择器，<code>equality-based</code>基于等式和<code>set-based</code>基于集合。标签选择器可以包含多个条件，并使用逗号进行分隔。</p> <ul><li>基于等式：</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># 选择了标签名为 `environment` 且 标签值为 `production` 的Kubernetes对象</span>
kubectl get pods <span class="token parameter variable">-l</span> <span class="token assign-left variable">environment</span><span class="token operator">=</span>production,tier<span class="token operator">=</span>frontend

<span class="token comment"># 选择了标签名为 `tier` 且标签值不等于 `frontend` 的对象，以及不包含标签 `tier` 的对象</span>
kubectl get pods <span class="token parameter variable">-l</span> tier <span class="token operator">!=</span> frontend

<span class="token comment"># 选择所有包含 `partition` 标签的对象</span>
kubectl get pods <span class="token parameter variable">-l</span> partition

<span class="token comment"># 选择所有不包含 `partition` 标签的对象</span>
kubectl get pods <span class="token parameter variable">-l</span> <span class="token operator">!</span>partition
</code></pre></div><ul><li>基于集合，支持的操作符——<code>in</code>、<code>notin</code>、<code>exists</code>：</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># 选择所有的包含 `environment` 标签且值为 `production` 或 `qa` 的对象</span>
kubectl get pods <span class="token parameter variable">-l</span> environment <span class="token keyword">in</span> <span class="token punctuation">(</span>production, qa<span class="token punctuation">)</span>

<span class="token comment"># 选择所有的 `tier` 标签不为 `frontend` 和 `backend`的对象，或不含 `tier` 标签的对象</span>
kubectl get pods <span class="token parameter variable">-l</span> tier notin <span class="token punctuation">(</span>frontend, backend<span class="token punctuation">)</span>

<span class="token comment"># 选择包含 `partition` 标签（不检查标签值）且 `environment` 不是 `qa` 的对象</span>
kubectl get pods <span class="token parameter variable">-l</span> partition,environment notin <span class="token punctuation">(</span>qa<span class="token punctuation">)</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/guide/other/Kubernetes/2-Kubernetes资源管理方式.html" class="prev">
        2.Kubernetes资源管理方式
      </a></span> <span class="next"><a href="/guide/other/Kubernetes/4-Kubernetes的Pod.html">
        4.Kubernetes的Pod
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.7bd49d80.js" defer></script><script src="/assets/js/2.63c13255.js" defer></script><script src="/assets/js/62.b85288fb.js" defer></script>
  </body>
</html>
