<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>1. 变量 | 迪</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/logo.jpg">
    <meta name="description" content="迪的文档">
    
    <link rel="preload" href="/assets/css/0.styles.d6ad21ed.css" as="style"><link rel="preload" href="/assets/js/app.7bd49d80.js" as="script"><link rel="preload" href="/assets/js/2.63c13255.js" as="script"><link rel="preload" href="/assets/js/70.868370f7.js" as="script"><link rel="prefetch" href="/assets/js/10.3494fc42.js"><link rel="prefetch" href="/assets/js/11.729c2ddc.js"><link rel="prefetch" href="/assets/js/12.2cbdbb2e.js"><link rel="prefetch" href="/assets/js/13.d9240596.js"><link rel="prefetch" href="/assets/js/14.482de4d9.js"><link rel="prefetch" href="/assets/js/15.5aafb57e.js"><link rel="prefetch" href="/assets/js/16.d8b25bdc.js"><link rel="prefetch" href="/assets/js/17.c59992e9.js"><link rel="prefetch" href="/assets/js/18.84364966.js"><link rel="prefetch" href="/assets/js/19.a2c00930.js"><link rel="prefetch" href="/assets/js/20.a708eb81.js"><link rel="prefetch" href="/assets/js/21.43accc43.js"><link rel="prefetch" href="/assets/js/22.f62a2950.js"><link rel="prefetch" href="/assets/js/23.34d0cd46.js"><link rel="prefetch" href="/assets/js/24.5338688c.js"><link rel="prefetch" href="/assets/js/25.49e53738.js"><link rel="prefetch" href="/assets/js/26.16ae9f2c.js"><link rel="prefetch" href="/assets/js/27.3a6d8ae8.js"><link rel="prefetch" href="/assets/js/28.c1d13fc9.js"><link rel="prefetch" href="/assets/js/29.6f2861b0.js"><link rel="prefetch" href="/assets/js/3.8a8baccb.js"><link rel="prefetch" href="/assets/js/30.e84371ac.js"><link rel="prefetch" href="/assets/js/31.5c72212f.js"><link rel="prefetch" href="/assets/js/32.6363355b.js"><link rel="prefetch" href="/assets/js/33.480aa18e.js"><link rel="prefetch" href="/assets/js/34.214d5115.js"><link rel="prefetch" href="/assets/js/35.e451acf7.js"><link rel="prefetch" href="/assets/js/36.40754204.js"><link rel="prefetch" href="/assets/js/37.c0669722.js"><link rel="prefetch" href="/assets/js/38.d21aec47.js"><link rel="prefetch" href="/assets/js/39.715eeabf.js"><link rel="prefetch" href="/assets/js/4.94733d25.js"><link rel="prefetch" href="/assets/js/40.11a9a769.js"><link rel="prefetch" href="/assets/js/41.36768ce0.js"><link rel="prefetch" href="/assets/js/42.ee1e0159.js"><link rel="prefetch" href="/assets/js/43.020fd64f.js"><link rel="prefetch" href="/assets/js/44.0c53e18b.js"><link rel="prefetch" href="/assets/js/45.4f3ef7b5.js"><link rel="prefetch" href="/assets/js/46.d9cdb5f2.js"><link rel="prefetch" href="/assets/js/47.1adb3d38.js"><link rel="prefetch" href="/assets/js/48.610e96d6.js"><link rel="prefetch" href="/assets/js/49.55d8c57f.js"><link rel="prefetch" href="/assets/js/5.2ea06e07.js"><link rel="prefetch" href="/assets/js/50.6ebf433b.js"><link rel="prefetch" href="/assets/js/51.7c6b8f90.js"><link rel="prefetch" href="/assets/js/52.272766fb.js"><link rel="prefetch" href="/assets/js/53.376bcdaa.js"><link rel="prefetch" href="/assets/js/54.64b22200.js"><link rel="prefetch" href="/assets/js/55.88f31c2d.js"><link rel="prefetch" href="/assets/js/56.adf8ff90.js"><link rel="prefetch" href="/assets/js/57.aef54518.js"><link rel="prefetch" href="/assets/js/58.3fd47dd4.js"><link rel="prefetch" href="/assets/js/59.517e8369.js"><link rel="prefetch" href="/assets/js/6.8d81f0ec.js"><link rel="prefetch" href="/assets/js/60.e18cfb4f.js"><link rel="prefetch" href="/assets/js/61.cc67b7d0.js"><link rel="prefetch" href="/assets/js/62.b85288fb.js"><link rel="prefetch" href="/assets/js/63.d5389af7.js"><link rel="prefetch" href="/assets/js/64.07e60b5f.js"><link rel="prefetch" href="/assets/js/65.aa0ff0bb.js"><link rel="prefetch" href="/assets/js/66.8e29c5d3.js"><link rel="prefetch" href="/assets/js/67.4c0457e3.js"><link rel="prefetch" href="/assets/js/68.4a42bf9a.js"><link rel="prefetch" href="/assets/js/69.8615447c.js"><link rel="prefetch" href="/assets/js/7.2259505f.js"><link rel="prefetch" href="/assets/js/71.c2d2d815.js"><link rel="prefetch" href="/assets/js/72.632399c5.js"><link rel="prefetch" href="/assets/js/73.32018efb.js"><link rel="prefetch" href="/assets/js/74.f9c48ad4.js"><link rel="prefetch" href="/assets/js/75.50fefe6a.js"><link rel="prefetch" href="/assets/js/76.ccc13674.js"><link rel="prefetch" href="/assets/js/77.59a643be.js"><link rel="prefetch" href="/assets/js/78.fe57d4be.js"><link rel="prefetch" href="/assets/js/79.900d03e3.js"><link rel="prefetch" href="/assets/js/8.8a6f0706.js"><link rel="prefetch" href="/assets/js/80.de0bd2c2.js"><link rel="prefetch" href="/assets/js/9.b3b9c71b.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d6ad21ed.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.jpg" alt="迪" class="logo"> <span class="site-name can-hide">迪</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/guide/back-end/java/java集合.html" class="nav-link">
  后端
</a></div><div class="nav-item"><a href="/guide/前端/JavaScript/ES6.html" class="nav-link">
  前端
</a></div><div class="nav-item"><a href="/guide/other/docker/Docker.html" class="nav-link">
  其他
</a></div><div class="nav-item"><a href="https://www.baidu.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  百度
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/language/chinese.html" class="nav-link">
  中文
</a></li><li class="dropdown-item"><!----> <a href="/language/english.html" class="nav-link">
  English
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/guide/back-end/java/java集合.html" class="nav-link">
  后端
</a></div><div class="nav-item"><a href="/guide/前端/JavaScript/ES6.html" class="nav-link">
  前端
</a></div><div class="nav-item"><a href="/guide/other/docker/Docker.html" class="nav-link">
  其他
</a></div><div class="nav-item"><a href="https://www.baidu.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  百度
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/language/chinese.html" class="nav-link">
  中文
</a></li><li class="dropdown-item"><!----> <a href="/language/english.html" class="nav-link">
  English
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>后端</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/back-end/java/java集合.html" class="sidebar-link">java集合</a></li><li><a href="/guide/back-end/java/多线程.html" class="sidebar-link">多线程</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>其他</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Docker</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>Kubernetes</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/other/Kubernetes/1.Kubernetes部署.html" class="sidebar-link">1.Kubernetes部署</a></li><li><a href="/guide/other/Kubernetes/2-Kubernetes资源管理方式.html" class="sidebar-link">2.Kubernetes资源管理方式</a></li><li><a href="/guide/other/Kubernetes/3-Kubernetes的对象.html" class="sidebar-link">3.Kubernetes的对象</a></li><li><a href="/guide/other/Kubernetes/4-Kubernetes的Pod.html" class="sidebar-link">4.Kubernetes的Pod</a></li><li><a href="/guide/other/Kubernetes/5-Kubernetes的控制器.html" class="sidebar-link">5.Kubernetes的控制器</a></li><li><a href="/guide/other/Kubernetes/6-Kubernetes的Service.html" class="sidebar-link">6.Kubernetes的Service</a></li><li><a href="/guide/other/Kubernetes/7-Kubernetes的数据存储.html" class="sidebar-link">7.Kubernetes的数据存储</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading open"><span>Linux</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/other/Linux/Linux.html" class="sidebar-link">Linux</a></li><li><a href="/guide/other/Linux/Linux基础.html" class="sidebar-link">Linux基础</a></li><li><a href="/guide/other/Linux/Shell脚本.html" class="active sidebar-link">Shell脚本</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/other/Linux/Shell脚本.html#_1-1-定义变量" class="sidebar-link">1.1 定义变量</a></li><li class="sidebar-sub-header"><a href="/guide/other/Linux/Shell脚本.html#_1-2-命名规则" class="sidebar-link">1.2 命名规则</a></li><li class="sidebar-sub-header"><a href="/guide/other/Linux/Shell脚本.html#_1-3-使用变量" class="sidebar-link">1.3 使用变量</a></li><li class="sidebar-sub-header"><a href="/guide/other/Linux/Shell脚本.html#_1-4-修改变量值" class="sidebar-link">1.4 修改变量值</a></li><li class="sidebar-sub-header"><a href="/guide/other/Linux/Shell脚本.html#_1-5-单引号-双引号" class="sidebar-link">1.5 单引号&amp;双引号</a></li><li class="sidebar-sub-header"><a href="/guide/other/Linux/Shell脚本.html#_1-6-命令结果赋值变量" class="sidebar-link">1.6 命令结果赋值变量</a></li><li class="sidebar-sub-header"><a href="/guide/other/Linux/Shell脚本.html#_1-7-只读变量" class="sidebar-link">1.7 只读变量</a></li><li class="sidebar-sub-header"><a href="/guide/other/Linux/Shell脚本.html#_1-8-删除变量" class="sidebar-link">1.8 删除变量</a></li><li class="sidebar-sub-header"><a href="/guide/other/Linux/Shell脚本.html#_3-1-给脚本文件传递参数" class="sidebar-link">3.1 给脚本文件传递参数</a></li><li class="sidebar-sub-header"><a href="/guide/other/Linux/Shell脚本.html#_3-2-给函数传递参数" class="sidebar-link">3.2 给函数传递参数</a></li><li class="sidebar-sub-header"><a href="/guide/other/Linux/Shell脚本.html#_4-1-给脚本文件传递参数" class="sidebar-link">4.1 给脚本文件传递参数</a></li><li class="sidebar-sub-header"><a href="/guide/other/Linux/Shell脚本.html#_4-2-给函数传递参数" class="sidebar-link">4.2 给函数传递参数</a></li><li class="sidebar-sub-header"><a href="/guide/other/Linux/Shell脚本.html#_4-3-shell" class="sidebar-link">4.3 Shell $?</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/other/Linux/Shell脚本.html#_4-3-1-获取上一个命令退出状态" class="sidebar-link">4.3.1 获取上一个命令退出状态</a></li><li class="sidebar-sub-header"><a href="/guide/other/Linux/Shell脚本.html#_4-3-2-获取函数返回值" class="sidebar-link">4.3.2 获取函数返回值</a></li></ul></li><li class="sidebar-sub-header"><a href="/guide/other/Linux/Shell脚本.html#_5-1-获取字符串长度" class="sidebar-link">5.1 获取字符串长度</a></li><li class="sidebar-sub-header"><a href="/guide/other/Linux/Shell脚本.html#_5-2-字符串拼接" class="sidebar-link">5.2 字符串拼接</a></li><li class="sidebar-sub-header"><a href="/guide/other/Linux/Shell脚本.html#_5-3-shell字符串截取" class="sidebar-link">5.3 Shell字符串截取</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/other/Linux/Shell脚本.html#_5-3-1-从指定位置开始截取" class="sidebar-link">5.3.1 从指定位置开始截取</a></li><li class="sidebar-sub-header"><a href="/guide/other/Linux/Shell脚本.html#_5-3-2-从指定字符开始截取" class="sidebar-link">5.3.2 从指定字符开始截取</a></li></ul></li><li class="sidebar-sub-header"><a href="/guide/other/Linux/Shell脚本.html#_6-1-定义数组" class="sidebar-link">6.1 定义数组</a></li><li class="sidebar-sub-header"><a href="/guide/other/Linux/Shell脚本.html#_6-2-获取数组元素" class="sidebar-link">6.2 获取数组元素</a></li><li class="sidebar-sub-header"><a href="/guide/other/Linux/Shell脚本.html#_6-3-获取数组长度" class="sidebar-link">6.3 获取数组长度</a></li><li class="sidebar-sub-header"><a href="/guide/other/Linux/Shell脚本.html#_6-4-数组拼接" class="sidebar-link">6.4 数组拼接</a></li><li class="sidebar-sub-header"><a href="/guide/other/Linux/Shell脚本.html#_6-5-删除数组元素" class="sidebar-link">6.5 删除数组元素</a></li><li class="sidebar-sub-header"><a href="/guide/other/Linux/Shell脚本.html#_7-1-alias" class="sidebar-link">7.1 alias</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/other/Linux/Shell脚本.html#_7-1-1-自定义别名" class="sidebar-link">7.1.1 自定义别名</a></li><li class="sidebar-sub-header"><a href="/guide/other/Linux/Shell脚本.html#_7-1-2-删除别名" class="sidebar-link">7.1.2 删除别名</a></li></ul></li><li class="sidebar-sub-header"><a href="/guide/other/Linux/Shell脚本.html#_7-2-echo" class="sidebar-link">7.2 echo</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/other/Linux/Shell脚本.html#_7-2-1-输出转义字符" class="sidebar-link">7.2.1 输出转义字符</a></li></ul></li><li class="sidebar-sub-header"><a href="/guide/other/Linux/Shell脚本.html#_7-3-read" class="sidebar-link">7.3 read</a></li><li class="sidebar-sub-header"><a href="/guide/other/Linux/Shell脚本.html#_7-4-exit" class="sidebar-link">7.4 exit</a></li><li class="sidebar-sub-header"><a href="/guide/other/Linux/Shell脚本.html#_7-5-declare-typeset" class="sidebar-link">7.5 declare&amp;typeset</a></li><li class="sidebar-sub-header"><a href="/guide/other/Linux/Shell脚本.html#_8-1-数学计算命令" class="sidebar-link">8.1 数学计算命令</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/other/Linux/Shell脚本.html#_8-1-1-用法" class="sidebar-link">8.1.1 (())用法</a></li><li class="sidebar-sub-header"><a href="/guide/other/Linux/Shell脚本.html#_8-1-2-let命令" class="sidebar-link">8.1.2 let命令</a></li></ul></li><li class="sidebar-sub-header"><a href="/guide/other/Linux/Shell脚本.html#_9-1-if语句" class="sidebar-link">9.1 if语句</a></li><li class="sidebar-sub-header"><a href="/guide/other/Linux/Shell脚本.html#_9-2-if-else-语句" class="sidebar-link">9.2 if else 语句</a></li><li class="sidebar-sub-header"><a href="/guide/other/Linux/Shell脚本.html#_9-3-if-elif-else-语句" class="sidebar-link">9.3 if elif else 语句</a></li><li class="sidebar-sub-header"><a href="/guide/other/Linux/Shell脚本.html#_11-1-与文件检测相关的-test-选项" class="sidebar-link">11.1 与文件检测相关的 test 选项</a></li><li class="sidebar-sub-header"><a href="/guide/other/Linux/Shell脚本.html#_11-2-与数值比较相关的-test-选项" class="sidebar-link">11.2 与数值比较相关的 test 选项</a></li><li class="sidebar-sub-header"><a href="/guide/other/Linux/Shell脚本.html#_11-3-与字符串判断相关的-test-选项" class="sidebar-link">11.3 与字符串判断相关的 test 选项</a></li><li class="sidebar-sub-header"><a href="/guide/other/Linux/Shell脚本.html#_11-4-与逻辑运算相关的-test-选项" class="sidebar-link">11.4 与逻辑运算相关的 test 选项</a></li></ul></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>项目管理</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/other/project-manage/git.html" class="sidebar-link">Git</a></li><li><a href="/guide/other/project-manage/maven.html" class="sidebar-link">Maven</a></li></ul></section></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_1-变量"><a href="#_1-变量" class="header-anchor">#</a> 1. 变量</h1> <h2 id="_1-1-定义变量"><a href="#_1-1-定义变量" class="header-anchor">#</a> 1.1 定义变量</h2> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token assign-left variable">variable</span><span class="token operator">=</span>value
<span class="token assign-left variable">variable</span><span class="token operator">=</span><span class="token string">'value'</span>
<span class="token assign-left variable">variable</span><span class="token operator">=</span><span class="token string">&quot;value&quot;</span>
</code></pre></div><p>variable是变量名，value是赋值给变量的值，如果value不包含任何空白符（例如空格、Tab缩进），那么可以不使用引号；如果value包含空白符，那么必须使用引号。</p> <blockquote><p>注意，<code>=</code>的周围不能有空格</p></blockquote> <h2 id="_1-2-命名规则"><a href="#_1-2-命名规则" class="header-anchor">#</a> 1.2 命名规则</h2> <ul><li>变量名由数字、字母、下划线组成</li> <li>必须以字母或者下划线开头</li> <li>不能使用Shell关键字（通过help命令可以查看）</li></ul> <h2 id="_1-3-使用变量"><a href="#_1-3-使用变量" class="header-anchor">#</a> 1.3 使用变量</h2> <p>使用定义过的变量，只要在变量名前加美元符号<code>$</code></p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token assign-left variable">author</span><span class="token operator">=</span><span class="token string">&quot;jiang&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token variable">$author</span>
<span class="token builtin class-name">echo</span> <span class="token variable">${author}</span>
</code></pre></div><p>变量名外的花括号<code>{}</code>是可选的，加花括号是为了帮助解释器识别变量的边界</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token assign-left variable">skill</span><span class="token operator">=</span><span class="token string">&quot;Java&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;I am good at <span class="token variable">${shill}</span>Script&quot;</span>
</code></pre></div><p>如果不加花括号，解释器就会把<code>$skillScript</code>当成一个变量。</p> <h2 id="_1-4-修改变量值"><a href="#_1-4-修改变量值" class="header-anchor">#</a> 1.4 修改变量值</h2> <p>已定义的变量，可以被重新赋值</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token assign-left variable">url</span><span class="token operator">=</span><span class="token string">&quot;http://mylsaber.com&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token variable">${url}</span>
<span class="token assign-left variable">url</span><span class="token operator">=</span><span class="token string">&quot;http://mylsaber.com/shell/&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token variable">${url}</span>
</code></pre></div><h2 id="_1-5-单引号-双引号"><a href="#_1-5-单引号-双引号" class="header-anchor">#</a> 1.5 单引号&amp;双引号</h2> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token assign-left variable">url</span><span class="token operator">=</span><span class="token string">&quot;http://mylsaber.com&quot;</span>
<span class="token assign-left variable">website1</span><span class="token operator">=</span><span class="token string">'官网：${url}'</span>
<span class="token assign-left variable">website2</span><span class="token operator">=</span><span class="token string">&quot;官网：<span class="token variable">${url}</span>&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token variable">$website1</span>
<span class="token builtin class-name">echo</span> <span class="token variable">$website2</span>
</code></pre></div><p>运行结果：</p> <div class="language-shell extra-class"><pre class="language-shell"><code>官网：<span class="token variable">${url}</span>
官网：http://mylsaber.com
</code></pre></div><p>单引号<code>''</code>包围变量时，单引号里面是什么就输出什么，即使内容中有变量和命令（命令需要反引起来）也会把它们原样输出。这种方式比较适合定义纯字符场景。
双引号<code>&quot;&quot;</code>包围变量时，输出会先解析里面的变量和命令，这个方式比较适合字符串中附带有变量和命令时的变量定义。</p> <h2 id="_1-6-命令结果赋值变量"><a href="#_1-6-命令结果赋值变量" class="header-anchor">#</a> 1.6 命令结果赋值变量</h2> <p>Shell支持将命令的结果赋值给变量</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token assign-left variable">variable</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">command</span><span class="token variable">`</span></span>
<span class="token assign-left variable">variable</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">command</span><span class="token variable">)</span></span>
</code></pre></div><ul><li>第一种方式把命令用反引号``` `包围起来，反引号和单引号非常相似，不推荐这种方式。</li> <li>第二种把命令用<code>$()</code>包围起来，推荐</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code>jiangfangwei@la-jiangfangwei jfw % <span class="token function">cat</span> test.sh 
<span class="token comment">#!/bin/bash</span>
<span class="token builtin class-name">echo</span> <span class="token variable">$$</span>
jiangfangwei@la-jiangfangwei jfw % <span class="token assign-left variable">log</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">cat</span> test.sh<span class="token variable">)</span></span> 
jiangfangwei@la-jiangfangwei jfw % <span class="token builtin class-name">echo</span> <span class="token variable">$log</span>
<span class="token comment">#!/bin/bash</span>
<span class="token builtin class-name">echo</span> <span class="token variable">$$</span>
</code></pre></div><h2 id="_1-7-只读变量"><a href="#_1-7-只读变量" class="header-anchor">#</a> 1.7 只读变量</h2> <p>使用readonly命令可以将变量定义为只读变量</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token assign-left variable">name</span><span class="token operator">=</span><span class="token string">&quot;jiang&quot;</span>
<span class="token builtin class-name">readonly</span> name
</code></pre></div><h2 id="_1-8-删除变量"><a href="#_1-8-删除变量" class="header-anchor">#</a> 1.8 删除变量</h2> <p>使用unset命令可以删除变量</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">unset</span> variable_name
</code></pre></div><p>unset命令不能删除只读变量。</p> <h1 id="_2-shell命令替换"><a href="#_2-shell命令替换" class="header-anchor">#</a> 2. Shell命令替换</h1> <p>Shell 中有两种方式可以完成命令替换，一种是反引号````，一种是<code>$()</code>，使用方法如下：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token assign-left variable">variable</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">command</span><span class="token variable">`</span></span>
<span class="token assign-left variable">variable</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">command</span><span class="token variable">)</span></span>
</code></pre></div><blockquote><p>注意，如果被替换的命令的输出内容包括多行（也即有换行符），或者含有多个连续的空白符，那么在输出变量时应该将变量用双引号包围，否则系统会使用默认的空白符来填充，这会导致换行无效，以及连续的空白符被压缩成一个。</p></blockquote> <p>原则上讲，上面提到的两种变量替换的形式是等价的，可以随意使用；但是，反引号毕竟看起来像单引号，有时候会对查看代码造成困扰，而使用 $() 就相对清晰，能有效避免这种混乱。而且有些情况必须使用 $()：$() 支持嵌套，反引号不行。</p> <h1 id="_3-位置参数"><a href="#_3-位置参数" class="header-anchor">#</a> 3. 位置参数</h1> <p>运行Shell脚本时，我们可以给他传递一些参数，这些参数在脚本内部可以使用<code>$n</code>的形式来接收，例如<code>$1</code>表示第一个参数，<code>$2</code>表示第二个参数。</p> <h2 id="_3-1-给脚本文件传递参数"><a href="#_3-1-给脚本文件传递参数" class="header-anchor">#</a> 3.1 给脚本文件传递参数</h2> <p>编写test.sh</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token builtin class-name">echo</span> <span class="token string">&quot;Language: <span class="token variable">$1</span>&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;URL: <span class="token variable">$2</span>&quot;</span>
</code></pre></div><p>运行test.sh并附带参数</p> <div class="language-shell extra-class"><pre class="language-shell"><code>jiangfangwei@la-jiangfangwei jfw % ./test.sh <span class="token function">java</span> www.mylsaber.com
Language: <span class="token function">java</span>
URL: www.mylsaber.com
</code></pre></div><h2 id="_3-2-给函数传递参数"><a href="#_3-2-给函数传递参数" class="header-anchor">#</a> 3.2 给函数传递参数</h2> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>

functioin <span class="token function-name function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token builtin class-name">echo</span> <span class="token string">&quot;Language: <span class="token variable">$1</span>&quot;</span>
	<span class="token builtin class-name">echo</span> <span class="token string">&quot;URL: <span class="token variable">$2</span>&quot;</span>
<span class="token punctuation">}</span>

func <span class="token function">java</span> www.mylsaber.com
</code></pre></div><blockquote><p>如果参数个数太多，达到或者超过10个，那么就得使用<code>${n}</code>的形式来接收了。</p></blockquote> <h1 id="_4-shell特殊变量"><a href="#_4-shell特殊变量" class="header-anchor">#</a> 4. Shell特殊变量</h1> <table><thead><tr><th>变量</th> <th>含义</th></tr></thead> <tbody><tr><td>$0</td> <td>当前脚本的文件名</td></tr> <tr><td>$n</td> <td>脚本或者函数的位置参数</td></tr> <tr><td>$#</td> <td>传递给脚本或者函数的参数个数</td></tr> <tr><td>$*</td> <td>传递给脚本或者函数的所有参数</td></tr> <tr><td>$@</td> <td>传递给脚本或者函数的所有参数。当被双引号<code>&quot;&quot;</code></td></tr> <tr><td>包含时，$@与$*稍有不同</td> <td></td></tr> <tr><td>$?</td> <td>上一个命令的退出状态，或者函数的返回值</td></tr> <tr><td>$$</td> <td>当前Shell进程ID，对于Shell脚本，就是这些脚本所在的进程ID</td></tr></tbody></table> <h2 id="_4-1-给脚本文件传递参数"><a href="#_4-1-给脚本文件传递参数" class="header-anchor">#</a> 4.1 给脚本文件传递参数</h2> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;Process ID: <span class="token variable">$$</span>&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;File Name: <span class="token variable">$0</span>&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;First Parameter : <span class="token variable">$1</span>&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;Second Parameter : <span class="token variable">$2</span>&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;All parameters 1: <span class="token variable">$@</span>&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;All parameters 2: <span class="token variable">$*</span>&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;Total: <span class="token variable">$#</span>&quot;</span>
</code></pre></div><p>运行结果：</p> <div class="language-shell extra-class"><pre class="language-shell"><code>jiangfangwei@la-jiangfangwei jfw % ./test.sh <span class="token function">java</span> linux
Process ID: <span class="token number">3858</span>
File Name: ./test.sh
First Parameter <span class="token builtin class-name">:</span> <span class="token function">java</span>
Second Parameter <span class="token builtin class-name">:</span> linux
All parameters <span class="token number">1</span>: <span class="token function">java</span> linux
All parameters <span class="token number">2</span>: <span class="token function">java</span> linux
Total: <span class="token number">2</span>
</code></pre></div><h2 id="_4-2-给函数传递参数"><a href="#_4-2-给函数传递参数" class="header-anchor">#</a> 4.2 给函数传递参数</h2> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token comment">#定义函数</span>
<span class="token keyword">function</span> <span class="token function-name function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;Language: <span class="token variable">$1</span>&quot;</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;URL: <span class="token variable">$2</span>&quot;</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;First Parameter : <span class="token variable">$1</span>&quot;</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;Second Parameter : <span class="token variable">$2</span>&quot;</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;All parameters 1: <span class="token variable">$@</span>&quot;</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;All parameters 2: <span class="token variable">$*</span>&quot;</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;Total: <span class="token variable">$#</span>&quot;</span>
<span class="token punctuation">}</span>

<span class="token comment">#调用函数</span>
func Java www.mylsaber.com
</code></pre></div><p>运行结果：</p> <div class="language-shell extra-class"><pre class="language-shell"><code>jiangfangwei@la-jiangfangwei jfw % ./test.sh 
Language: Java
URL: www.mylsaber.com
First Parameter <span class="token builtin class-name">:</span> Java
Second Parameter <span class="token builtin class-name">:</span> www.mylsaber.com
All parameters <span class="token number">1</span>: Java www.mylsaber.com
All parameters <span class="token number">2</span>: Java www.mylsaber.com
Total: <span class="token number">2</span>
</code></pre></div><h2 id="_4-3-shell"><a href="#_4-3-shell" class="header-anchor">#</a> 4.3 Shell $?</h2> <p><code>$?</code>用来获取上一个命令的退出状态，或者上一个函数的返回值。
退出状态就是上一个命令执行后的返回结果。是一个数字，一般情况下，大部分命令执行成功会返回0，失败返回1。</p> <h3 id="_4-3-1-获取上一个命令退出状态"><a href="#_4-3-1-获取上一个命令退出状态" class="header-anchor">#</a> 4.3.1 获取上一个命令退出状态</h3> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">$1</span>&quot;</span> <span class="token operator">==</span> <span class="token number">100</span> <span class="token punctuation">]</span>
<span class="token keyword">then</span>
   <span class="token builtin class-name">exit</span> <span class="token number">0</span>  <span class="token comment">#参数正确，退出状态为0</span>
<span class="token keyword">else</span>
   <span class="token builtin class-name">exit</span> <span class="token number">1</span>  <span class="token comment">#参数错误，退出状态1</span>
<span class="token keyword">fi</span>
</code></pre></div><p><code>exit</code>表示退出当前Shell进程，必须在新进程中运行test.sh，否者当前Shell会话会被关闭，我们就无法取得退出状态了。</p> <div class="language-shell extra-class"><pre class="language-shell"><code>jiangfangwei@la-jiangfangwei jfw % ./test.sh <span class="token number">100</span>
jiangfangwei@la-jiangfangwei jfw % <span class="token builtin class-name">echo</span> <span class="token variable">$?</span>
<span class="token number">0</span>
jiangfangwei@la-jiangfangwei jfw % ./test.sh <span class="token number">10</span> 
jiangfangwei@la-jiangfangwei jfw % <span class="token builtin class-name">echo</span> <span class="token variable">$?</span>     
<span class="token number">1</span>
</code></pre></div><h3 id="_4-3-2-获取函数返回值"><a href="#_4-3-2-获取函数返回值" class="header-anchor">#</a> 4.3.2 获取函数返回值</h3> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token comment">#得到两个数相加的和</span>
<span class="token keyword">function</span> <span class="token function-name function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token builtin class-name">return</span> <span class="token variable"><span class="token variable">`</span><span class="token function">expr</span> $1 + $2<span class="token variable">`</span></span>
<span class="token punctuation">}</span>
<span class="token function">add</span> <span class="token number">23</span> <span class="token number">50</span>  <span class="token comment">#调用函数</span>
<span class="token builtin class-name">echo</span> <span class="token variable">$?</span>  <span class="token comment">#获取函数返回值</span>
</code></pre></div><blockquote><p>严格来说，Shell函数中的return关键字用来表示函数的退出状态，而不是函数的返回值；Shell不像其他编程语言，没有专门处理返回值的关键字。</p></blockquote> <h1 id="_5-shell字符串"><a href="#_5-shell字符串" class="header-anchor">#</a> 5. Shell字符串</h1> <ul><li>由单引号<code>''</code>包围的字符串：
<ul><li>任何字符都会原样输出，在其中使用变量是无效的。</li> <li>字符串中不能出现单引号，即使对单引号进行转义也不行。</li></ul></li> <li>由双引号<code>&quot;&quot;</code>包围的字符串：
<ul><li>如果其中包含了某个变量，那么该变量会被解析（得到该变量的值），而不是原样输出。</li> <li>字符串中可以出现双引号，只要它被转义了就行。</li></ul></li> <li>不被引号包围的字符串
<ul><li>不被引号包围的字符串中出现变量时也会被解析，这一点和双引号<code>&quot; &quot;</code>包围的字符串一样。</li> <li>字符串中不能出现空格，否则空格后边的字符串会作为其他变量或者命令解析。</li></ul></li></ul> <h2 id="_5-1-获取字符串长度"><a href="#_5-1-获取字符串长度" class="header-anchor">#</a> 5.1 获取字符串长度</h2> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token variable">${<span class="token operator">#</span>string_name}</span>
</code></pre></div><p>sting_name表示字符串名字。</p> <h2 id="_5-2-字符串拼接"><a href="#_5-2-字符串拼接" class="header-anchor">#</a> 5.2 字符串拼接</h2> <p>在Shell中你不需要使用任何运算符，将两个字符串并排放在一起就能实现拼接。</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token assign-left variable">name</span><span class="token operator">=</span><span class="token string">&quot;shell&quot;</span>
<span class="token assign-left variable">url</span><span class="token operator">=</span><span class="token string">&quot;www.mylsaber.com&quot;</span>
<span class="token assign-left variable">str1</span><span class="token operator">=</span><span class="token variable">$name</span><span class="token variable">$url</span> <span class="token comment">#中间不能有空格</span>
<span class="token assign-left variable">str2</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$name</span> <span class="token variable">$url</span>&quot;</span> <span class="token comment">#双引号中间可以有空格</span>
<span class="token assign-left variable">str3</span><span class="token operator">=</span><span class="token variable">$name</span><span class="token string">&quot;: &quot;</span><span class="token variable">$url</span>  <span class="token comment">#中间可以出现别的字符串</span>
<span class="token assign-left variable">str4</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$name</span>: <span class="token variable">$url</span>&quot;</span>  <span class="token comment">#这样写也可以</span>
<span class="token assign-left variable">str5</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">${name}</span>Script: <span class="token variable">${url}</span>index.html&quot;</span>  <span class="token comment">#这个时候需要给变量名加上大括号</span>

<span class="token builtin class-name">echo</span> <span class="token variable">$str1</span>
<span class="token builtin class-name">echo</span> <span class="token variable">$str2</span>
<span class="token builtin class-name">echo</span> <span class="token variable">$str3</span>
<span class="token builtin class-name">echo</span> <span class="token variable">$str4</span>
<span class="token builtin class-name">echo</span> <span class="token variable">$str5</span>
</code></pre></div><h2 id="_5-3-shell字符串截取"><a href="#_5-3-shell字符串截取" class="header-anchor">#</a> 5.3 Shell字符串截取</h2> <h3 id="_5-3-1-从指定位置开始截取"><a href="#_5-3-1-从指定位置开始截取" class="header-anchor">#</a> 5.3.1 从指定位置开始截取</h3> <p>这种方式需要两个参数：除了指定起始位置，还需要截取长度，才能最终确定要截取的字符串。</p> <ul><li>从字符串左边开始计数</li></ul> <div class="language- extra-class"><pre class="language-text"><code>${sting:start:length}
</code></pre></div><p>sring是要截取的字符串，start起始位置，length截取长度</p> <ul><li>从字符串右边开始计数</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token variable">${sring<span class="token operator">:</span> 0-start<span class="token operator">:</span> length}</span>
</code></pre></div><h3 id="_5-3-2-从指定字符开始截取"><a href="#_5-3-2-从指定字符开始截取" class="header-anchor">#</a> 5.3.2 从指定字符开始截取</h3> <p>这种截取方式无法指定字符串长度，只能从指定字符（子字符串）截取到字符串末尾。Shell 可以截取指定字符（子字符串）右边的所有字符，也可以截取左边的所有字符。</p> <ul><li>使用#截取右边字符</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token variable">${string<span class="token operator">#</span>*chars}</span>
</code></pre></div><p>其中，string 表示要截取的字符，chars 是指定的字符（或者子字符串），<code>*</code>是通配符的一种，表示任意长度的字符串。<code>*chars</code>连起来使用的意思是：忽略左边的所有字符，直到遇见 chars（chars 不会被截取）。
如果不需要忽略 chars 左边的字符，那么也可以不写<code>*</code>。
以上写法遇到第一个匹配的字符（子字符串）就结束了。
如果希望直到最后一个指定字符（子字符串）再匹配结束，那么可以使用<code>##</code>，具体格式为：</p> <ul><li>使用 % 截取左边字符</li></ul> <p>使用<code>%</code>号可以截取指定字符（或者子字符串）左边的所有字符，具体格式如下：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token variable">${string<span class="token operator">%</span>chars*}</span>
</code></pre></div><p>请注意<code>*</code>的位置，因为要截取 chars 左边的字符，而忽略 chars 右边的字符，所以<code>*</code>应该位于 chars 的右侧。其他方面<code>%</code>和<code>#</code>的用法相同。</p> <h1 id="_6-shell数组"><a href="#_6-shell数组" class="header-anchor">#</a> 6. Shell数组</h1> <p>Shell支持数组，并且没有限制大小，下标从0开始。</p> <h2 id="_6-1-定义数组"><a href="#_6-1-定义数组" class="header-anchor">#</a> 6.1 定义数组</h2> <p>用括号<code>()</code>来表示数组，数组元素之间用空格来分隔。</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token assign-left variable">array_name</span><span class="token operator">=</span><span class="token punctuation">(</span>ele1 ele2 ele3 ele4<span class="token punctuation">)</span>
</code></pre></div><p>Shell是弱类型，并不要求所有数组元素类型相同。</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token assign-left variable">arr</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">20</span> <span class="token number">55</span> <span class="token string">&quot;jiang&quot;</span> <span class="token string">&quot;di&quot;</span><span class="token punctuation">)</span>
</code></pre></div><p>Shell数组长度不固定，定义之后还可以增加元素。例如，nums数组长度为6，使用<code>nums[6]=78</code>，可以使其长度扩展到7。
此外，无需逐个给数组赋值，下面代码就只给特定元素赋值。</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token assign-left variable">ages</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">24</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">19</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">21</span><span class="token punctuation">)</span>
</code></pre></div><p>以上代码就只给3、5、10元素赋值，所以数组长度为3。</p> <h2 id="_6-2-获取数组元素"><a href="#_6-2-获取数组元素" class="header-anchor">#</a> 6.2 获取数组元素</h2> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token variable">${array_name<span class="token punctuation">[</span>index<span class="token punctuation">]</span>}</span>
</code></pre></div><p>使用<code>@</code>或<code>*</code>可以获取数组所有元素。</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token variable">${nums<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span>
<span class="token variable">${nums<span class="token punctuation">[</span>*<span class="token punctuation">]</span>}</span>
</code></pre></div><h2 id="_6-3-获取数组长度"><a href="#_6-3-获取数组长度" class="header-anchor">#</a> 6.3 获取数组长度</h2> <p>利用<code>@</code>或<code>*</code>，可以将数组扩展成列表，然后使用<code>#</code>来获取数组元素的个数。</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token variable">${<span class="token operator">#</span>array_name<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span>
<span class="token variable">${<span class="token operator">#</span>array_name<span class="token punctuation">[</span>*<span class="token punctuation">]</span>}</span>
</code></pre></div><p>如果某个元素是字符串，还可以通过指定下标的方式获取该元素的长度。</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token variable">${<span class="token operator">#</span>arr<span class="token punctuation">[</span>2<span class="token punctuation">]</span>}</span>
</code></pre></div><p>Shell如何获取字符串长度的？其实如出一辙。</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token variable">${<span class="token operator">#</span>sting_name}</span>
</code></pre></div><h2 id="_6-4-数组拼接"><a href="#_6-4-数组拼接" class="header-anchor">#</a> 6.4 数组拼接</h2> <p>拼接数组的思路是：先利用<code>@</code>或<code>*</code>，将数组扩展成列表，然后再合并到一起。</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token assign-left variable">array_new</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token variable">${array1<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span>  <span class="token variable">${array2<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span><span class="token punctuation">)</span>
<span class="token assign-left variable">array_new</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token variable">${array1<span class="token punctuation">[</span>*<span class="token punctuation">]</span>}</span>  <span class="token variable">${array2<span class="token punctuation">[</span>*<span class="token punctuation">]</span>}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="_6-5-删除数组元素"><a href="#_6-5-删除数组元素" class="header-anchor">#</a> 6.5 删除数组元素</h2> <p>在 Shell 中，使用 unset 关键字来删除数组元素</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">unset</span> array_name<span class="token punctuation">[</span>index<span class="token punctuation">]</span>
</code></pre></div><p>如果不写下标，就是删除整个数组。</p> <h1 id="_7-shell内建命令"><a href="#_7-shell内建命令" class="header-anchor">#</a> 7 Shell内建命令</h1> <p>所谓内建命令，就是由Bash自身提供的命令，而不是文件系统中的某个可执行文件。
可以使用type来确定一个命令是否是内建命令。</p> <h2 id="_7-1-alias"><a href="#_7-1-alias" class="header-anchor">#</a> 7.1 alias</h2> <p>alias用来给命令创建别名。如果直接输入该命令且不带任何参数，则列出当前Shell进程中使用了哪些别名。这也是<code>ll</code>与<code>ls -l</code>命令效果一样的原因。</p> <h3 id="_7-1-1-自定义别名"><a href="#_7-1-1-自定义别名" class="header-anchor">#</a> 7.1.1 自定义别名</h3> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">alias</span> new-name<span class="token operator">=</span><span class="token string">'command'</span>
</code></pre></div><p>比如，一般关机命令是<code>shutdown -h now</code>，写起来比较长，这时可以重新定义一个关机命令。</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">alias</span> <span class="token assign-left variable">myShutdown</span><span class="token operator">=</span><span class="token string">'shutdown -h now'</span>
</code></pre></div><p>通过date命令可以获取当前UNIX时间戳，具体写法为<code>date +%s</code>，可一个定义一个别名。</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">alias</span> <span class="token assign-left variable">timestamp</span><span class="token operator">=</span><span class="token string">'date +%s'</span>
</code></pre></div><p><strong>别名只是临时的</strong>
在代码中使用alias命令定义的别名只能在当前Shell进程中使用，在子进程和其他进程中都不能使用。当前Shell进程结束后，别名也消失。</p> <h3 id="_7-1-2-删除别名"><a href="#_7-1-2-删除别名" class="header-anchor">#</a> 7.1.2 删除别名</h3> <p>使用unalias内建命令可以删除当前Shell进程中的别名。</p> <ul><li>命令后跟上别名，删除指定别名</li> <li>命令后跟上<code>-a</code>参数，删除当前Shell进程中所有的别名。</li></ul> <h2 id="_7-2-echo"><a href="#_7-2-echo" class="header-anchor">#</a> 7.2 echo</h2> <p>用来在终端输出字符串，并在最后默认加上换行符。如果不希望换行，可以加上<code>-n</code>参数</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token assign-left variable">name</span><span class="token operator">=</span>jiang
<span class="token builtin class-name">echo</span> <span class="token variable">${name}</span>
<span class="token builtin class-name">echo</span> <span class="token parameter variable">-n</span> <span class="token variable">${name}</span>
</code></pre></div><h3 id="_7-2-1-输出转义字符"><a href="#_7-2-1-输出转义字符" class="header-anchor">#</a> 7.2.1 输出转义字符</h3> <p>默认情况下，echo不会解析以反斜杠<code>\</code>开头的转义字符。比如，<code>\n</code>表示换行，echo默认会将它作为普通字符对待。</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># echo &quot;hello \nworld&quot;</span>
hello <span class="token punctuation">\</span>nworld
</code></pre></div><p>我们可以添加<code>-e</code>参数来让echo命令解析转义字符。</p> <h2 id="_7-3-read"><a href="#_7-3-read" class="header-anchor">#</a> 7.3 read</h2> <p>用来从标准输入中读取数据并赋值给变量。如果没有进行重定向，默认就是从键盘读取用户输入的数据；如果进行重定向，那么可以从文件中读取数据。</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">read</span> <span class="token punctuation">[</span>-option<span class="token punctuation">]</span> <span class="token punctuation">[</span>variables<span class="token punctuation">]</span>
</code></pre></div><p><code>option</code>表示选项，<code>variables</code>表示用来存储数据的变量。
<code>option</code>和<code>variables</code>都是可选的，如果没有提供变量名，那么读取的数据将存放到环境变量REPLY中。</p> <table><thead><tr><th>选项</th> <th>说明</th></tr></thead> <tbody><tr><td>-a array</td> <td>把读取的数据赋值给数组 array，从下标 0 开始。</td></tr> <tr><td>-d delimiter</td> <td>用字符串 delimiter 指定读取结束的位置，而不是一个换行符（读取到的数据不包括 delimiter）。</td></tr> <tr><td>-e</td> <td>在获取用户输入的时候，对功能键进行编码转换，不会直接显式功能键对应的字符。</td></tr> <tr><td>-n num</td> <td>读取 num 个字符，而不是整行字符。</td></tr> <tr><td>-p prompt</td> <td>显示提示信息，提示内容为 prompt。</td></tr> <tr><td>-r</td> <td>原样读取（Raw mode），不把反斜杠字符解释为转义字符。</td></tr> <tr><td>-s</td> <td>静默模式（Silent mode），不会在屏幕上显示输入的字符。当输入密码和其它确认信息的时候，这是很有必要的。</td></tr> <tr><td>-t seconds</td> <td>设置超时时间，单位为秒。如果用户没有在指定时间内输入完成，那么 read 将会返回一个非 0 的退出状态，表示读取失败。</td></tr> <tr><td>-u fd</td> <td>使用文件描述符 fd 作为输入源，而不是标准输入，类似于重定向。</td></tr></tbody></table> <h2 id="_7-4-exit"><a href="#_7-4-exit" class="header-anchor">#</a> 7.4 exit</h2> <p>用来退出当前Shell进程，并返回一个退出状态；使用<code>$?</code>可以接收这个退出状态。
exit可以接受一个整数作为参数，代表退出状态，如果不指定，默认状态为0。一般情况，0代表成功，非0表示执行失败（出错）了。
exit退出状态只能是一个介于0~255之间的整数。其中只有0表示成功，其他值都表示失败。</p> <h2 id="_7-5-declare-typeset"><a href="#_7-5-declare-typeset" class="header-anchor">#</a> 7.5 declare&amp;typeset</h2> <p>declare和typeset用法相同，都是用来设置变量的属性。不过typeset已经被弃用了，推荐使用declare替代。</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">declare</span> <span class="token punctuation">[</span>+/-<span class="token punctuation">]</span> <span class="token punctuation">[</span>aAfFgilprtux<span class="token punctuation">]</span> <span class="token punctuation">[</span>变量名<span class="token operator">=</span>变量值<span class="token punctuation">]</span>
</code></pre></div><p><code>-</code>表示设置属性，<code>+</code>表示取消属性，<code>aAfFgilprtux</code>都是具体的选项，它们的含义如下表所示：</p> <table><thead><tr><th>选项</th> <th>含义</th></tr></thead> <tbody><tr><td>-f [name]</td> <td>列出之前由用户在脚本中定义的函数名称和函数体。</td></tr> <tr><td>-F [name]</td> <td>仅列出自定义函数名称。</td></tr> <tr><td>-g name</td> <td>在 Shell 函数内部创建全局变量。</td></tr> <tr><td>-p [name]</td> <td>显示指定变量的属性和值。</td></tr> <tr><td>-a name</td> <td>声明变量为普通数组。</td></tr> <tr><td>-A name</td> <td>声明变量为关联数组（支持索引下标为字符串）。</td></tr> <tr><td>-i name</td> <td>将变量定义为整数型。</td></tr> <tr><td>-r name[=value]</td> <td>将变量定义为只读（不可修改和删除），等价于 readonly name。</td></tr> <tr><td>-x name[=value]</td> <td>将变量设置为环境变量，等价于 export name[=value]。</td></tr></tbody></table> <h1 id="_8-shell数学计算"><a href="#_8-shell数学计算" class="header-anchor">#</a> 8. Shell数学计算</h1> <table><thead><tr><th>算术运算符</th> <th>说明/含义</th></tr></thead> <tbody><tr><td>+、-</td> <td>加法（或正号）、减法（或负号）</td></tr> <tr><td>*、/、%</td> <td>乘法、除法、取余（取模）</td></tr> <tr><td>**</td> <td>幂运算</td></tr> <tr><td>++、--</td> <td>自增和自减，可以放在变量的前面也可以放在变量的后面</td></tr> <tr><td>!、&amp;&amp;、||</td> <td>逻辑非（取反）、逻辑与（and）、逻辑或（or）</td></tr> <tr><td>&lt;、&lt;=、&gt;、&gt;=</td> <td>比较符号（小于、小于等于、大于、大于等于）</td></tr> <tr><td>==、!=、=</td> <td>比较符号（相等、不相等；对于字符串，= 也可以表示相当于）</td></tr> <tr><td>&lt;&lt;、&gt;&gt;</td> <td>向左移位、向右移位</td></tr> <tr><td>~、|、 &amp;、^</td> <td>按位取反、按位或、按位与、按位异或</td></tr> <tr><td>=、+=、-=、*=、/=、%=</td> <td>赋值运算符，例如 a+=1 相当于 a=a+1，a-=1 相当于 a=a-1</td></tr></tbody></table> <p>但是，Shell 和其它编程语言不同，Shell 不能直接进行算数运算，必须使用数学计算命令
这是因为，在 Bash Shell 中，如果不特别指明，每一个变量的值都是字符串，无论你给变量赋值时有没有使用引号，值都会以字符串的形式存储。</p> <h2 id="_8-1-数学计算命令"><a href="#_8-1-数学计算命令" class="header-anchor">#</a> 8.1 数学计算命令</h2> <table><thead><tr><th>运算操作符/运算命令</th> <th>说明</th></tr></thead> <tbody><tr><td><a href="http://m.biancheng.net/view/2480.html" target="_blank" rel="noopener noreferrer">(( ))<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>用于整数运算，效率很高，<strong>推荐使用</strong>。</td></tr> <tr><td><a href="http://m.biancheng.net/view/2504.html" target="_blank" rel="noopener noreferrer">let<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>用于整数运算，和 (()) 类似。</td></tr> <tr><td><a href="http://m.biancheng.net/view/vip_3235.html" target="_blank" rel="noopener noreferrer">$[]<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>用于整数运算，不如 (()) 灵活。</td></tr> <tr><td><a href="http://m.biancheng.net/view/vip_3236.html" target="_blank" rel="noopener noreferrer">expr<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>可用于整数运算，也可以处理字符串。比较麻烦，需要注意各种细节，不推荐使用。</td></tr> <tr><td><a href="http://m.biancheng.net/view/vip_3237.html" target="_blank" rel="noopener noreferrer">bc<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>Linux下的一个计算器程序，可以处理整数和小数。Shell 本身只支持整数运算，想计算小数就得使用 bc 这个外部的计算器。</td></tr> <tr><td><a href="http://m.biancheng.net/view/vip_3238.html" target="_blank" rel="noopener noreferrer">declare -i<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>将变量定义为整数，然后再进行数学运算时就不会被当做字符串了。功能有限，仅支持最基本的数学运算（加减乘除和取余），不支持逻辑运算、自增自减等，所以在实际开发中很少使用。</td></tr></tbody></table> <h3 id="_8-1-1-用法"><a href="#_8-1-1-用法" class="header-anchor">#</a> 8.1.1 (())用法</h3> <p>将数学运算表达式放在<code>((</code>和<code>))</code>之间。表达式可以只有一个，也可以有多个，多个表达式之间以逗号<code>,</code>分隔。对于多个表达式的情况，以最后一个表达式的值作为整个 (( )) 命令的执行结果。
可以使用<code>$</code>获取 (( )) 命令的结果，这和使用<code>$</code>获得变量值是类似的。</p> <table><thead><tr><th>运算操作符/运算命令</th> <th>说明</th></tr></thead> <tbody><tr><td>((a=10+66) ((b=a-15)) ((c=a+b))</td> <td>这种写法可以在计算完成后给变量赋值。以 ((b=a-15)) 为例，即将 a-15 的运算结果赋值给变量 c。  注意，使用变量时不用加<code>$</code></td></tr> <tr><td>前缀，(( )) 会自动解析变量名。</td> <td></td></tr> <tr><td>a=$((10+66) b=$((a-15)) c=$((a+b))</td> <td>可以在 (( )) 前面加上<code>$</code></td></tr> <tr><td>符号获取 (( )) 命令的执行结果，也即获取整个表达式的值。以 c=$((a+b)) 为例，即将 a+b 这个表达式的运算结果赋值给变量 c。  注意，类似 c=((a+b)) 这样的写法是错误的，不加<code>$</code>就不能取得表达式的结果。</td> <td></td></tr> <tr><td>((a&gt;7 &amp;&amp; b==c))</td> <td>(( )) 也可以进行逻辑运算，在 if 语句中常会使用逻辑运算。</td></tr> <tr><td>echo $((a+10))</td> <td>需要立即输出表达式的运算结果时，可以在 (( )) 前面加<code>$</code></td></tr> <tr><td>符号。</td> <td></td></tr> <tr><td>((a=3+5, b=a+10))</td> <td>对多个表达式同时进行计算。</td></tr></tbody></table> <p><strong>在 (( )) 中使用变量无需加上</strong><code>**$**</code><strong>前缀，(( )) 会自动解析变量名，这使得代码更加简洁，也符合程序员的书写习惯。</strong></p> <h3 id="_8-1-2-let命令"><a href="#_8-1-2-let命令" class="header-anchor">#</a> 8.1.2 let命令</h3> <p>let 命令和双小括号 (( )) 的用法是类似的，它们都是用来对整数进行运算</p> <blockquote><p>注意：和双小括号 (( )) 一样，let 命令也只能进行整数运算，不能对小数（浮点数）或者字符串进行运算。</p></blockquote> <p>Shell let 命令的语法格式为：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">let</span> 表达式
</code></pre></div><p>或者</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">let</span> <span class="token string">&quot;表达式&quot;</span>
</code></pre></div><p>或者</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">let</span> <span class="token string">'表达式'</span>
</code></pre></div><p>它们都等价于<code>((表达式))</code>。
当表达式中含有 Shell 特殊字符（例如 |）时，需要用双引号<code>&quot; &quot;</code>或者单引号<code>' '</code>将表达式包围起来。
和 (( )) 类似，let 命令也支持一次性计算多个表达式，并且以最后一个表达式的值作为整个 let 命令的执行结果。但是，对于多个表达式之间的分隔符，let 和 (( )) 是有区别的：</p> <ul><li>let 命令以空格来分隔多个表达式；</li> <li>(( )) 以逗号<code>,</code>来分隔多个表达式。</li></ul> <p>另外还要注意，对于类似<code>let x+y</code>这样的写法，Shell 虽然计算了 x+y 的值，但却将结果丢弃；若不想这样，可以使用<code>let sum=x+y</code>将 x+y 的结果保存在变量 sum 中。</p> <h1 id="_9-if-else语句"><a href="#_9-if-else语句" class="header-anchor">#</a> 9. if else语句</h1> <h2 id="_9-1-if语句"><a href="#_9-1-if语句" class="header-anchor">#</a> 9.1 if语句</h2> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token keyword">if</span>  condition
<span class="token keyword">then</span>
    statement<span class="token punctuation">(</span>s<span class="token punctuation">)</span>
<span class="token keyword">fi</span>
</code></pre></div><p><code>condition</code>是判断条件，如果 condition 成立（返回“真”），那么 then 后边的语句将会被执行；如果 condition 不成立（返回“假”），那么不会执行任何语句。
也可以将 then 和 if 写在一行：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token keyword">if</span>  condition<span class="token punctuation">;</span>  <span class="token keyword">then</span>
    statement<span class="token punctuation">(</span>s<span class="token punctuation">)</span>
<span class="token keyword">fi</span>
</code></pre></div><blockquote><p>注意 condition 后边的分号<code>;</code>，当 if 和 then 位于同一行的时候，这个分号是必须的，否则会有语法错误。</p></blockquote> <h2 id="_9-2-if-else-语句"><a href="#_9-2-if-else-语句" class="header-anchor">#</a> 9.2 if else 语句</h2> <p>如果有两个分支，就可以使用 if else 语句</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token keyword">if</span>  condition
<span class="token keyword">then</span>
   statement1
<span class="token keyword">else</span>
   statement2
<span class="token keyword">fi</span>
</code></pre></div><h2 id="_9-3-if-elif-else-语句"><a href="#_9-3-if-elif-else-语句" class="header-anchor">#</a> 9.3 if elif else 语句</h2> <p>Shell 支持任意数目的分支，当分支比较多时，可以使用 if elif else 结构</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token keyword">if</span>  condition1
<span class="token keyword">then</span>
   statement1
<span class="token keyword">elif</span> condition2
<span class="token keyword">then</span>
    statement2
<span class="token keyword">elif</span> condition3
<span class="token keyword">then</span>
    statement3
……
<span class="token keyword">else</span>
   statementn
<span class="token keyword">fi</span>
</code></pre></div><blockquote><p>注意，if 和 elif 后边都得跟着 then。</p></blockquote> <h1 id="_10-shell退出状态"><a href="#_10-shell退出状态" class="header-anchor">#</a> 10. Shell退出状态</h1> <p>每一条 Shell 命令，不管是 Bash 内置命令（例如 cd、echo），还是外部的 Linux 命令（例如 ls、awk），还是自定义的 Shell 函数，当它退出（运行结束）时，都会返回一个比较小的整数值给调用（使用）它的程序，这就是命令的<strong>退出状态（exit statu）</strong>。</p> <blockquote><p>很多 Linux 命令其实就是一个C语言程序，熟悉C语言的读者都知道，main() 函数的最后都有一个<code>return 0</code>，如果程序想在中间退出，还可以使用<code>exit 0</code>，这其实就是C语言程序的退出状态。当有其它程序调用这个程序时，就可以捕获这个退出状态。</p></blockquote> <p>if 语句的判断条件，从本质上讲，判断的就是命令的退出状态。
<strong>按照惯例来说，退出状态为 0 表示“成功”；也就是说，程序执行完成并且没有遇到任何问题。除 0 以外的其它任何退出状态都为“失败”。</strong></p> <h1 id="_11-test命令"><a href="#_11-test命令" class="header-anchor">#</a> 11. test命令</h1> <p>test 是 Shell 内置命令，用来检测某个条件是否成立。test 通常和 if 语句一起使用，并且大部分 if 语句都依赖 test。test 命令有很多选项，可以进行数值、字符串和文件三个方面的检测。
Shell test 命令的用法为：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">test</span> expression
</code></pre></div><p>当 test 判断 expression 成立时，退出状态为 0，否则为非 0 值。
test 命令也可以简写为<code>[]</code>，它的用法为：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span> expression <span class="token punctuation">]</span>
</code></pre></div><p>注意<code>[]</code>和<code>expression</code>之间的空格，这两个空格是必须的，否则会导致语法错误。<code>[]</code>的写法更加简洁，比 test 使用频率高。</p> <h2 id="_11-1-与文件检测相关的-test-选项"><a href="#_11-1-与文件检测相关的-test-选项" class="header-anchor">#</a> 11.1 与文件检测相关的 test 选项</h2> <table><thead><tr><th>文件类型判断</th> <th></th></tr></thead> <tbody><tr><td>选 项</td> <td>作 用</td></tr> <tr><td>-b filename</td> <td>判断文件是否存在，并且是否为块设备文件。</td></tr> <tr><td>-c filename</td> <td>判断文件是否存在，并且是否为字符设备文件。</td></tr> <tr><td>-d filename</td> <td>判断文件是否存在，并且是否为目录文件。</td></tr> <tr><td>-e filename</td> <td>判断文件是否存在。</td></tr> <tr><td>-f filename</td> <td>判断文件是否存在，井且是否为普通文件。</td></tr> <tr><td>-L filename</td> <td>判断文件是否存在，并且是否为符号链接文件。</td></tr> <tr><td>-p filename</td> <td>判断文件是否存在，并且是否为管道文件。</td></tr> <tr><td>-s filename</td> <td>判断文件是否存在，并且是否为非空。</td></tr> <tr><td>-S filename</td> <td>判断该文件是否存在，并且是否为套接字文件。</td></tr> <tr><td>文件权限判断</td> <td></td></tr> <tr><td>选 项</td> <td>作 用</td></tr> <tr><td>-r filename</td> <td>判断文件是否存在，并且是否拥有读权限。</td></tr> <tr><td>-w filename</td> <td>判断文件是否存在，并且是否拥有写权限。</td></tr> <tr><td>-x filename</td> <td>判断文件是否存在，并且是否拥有执行权限。</td></tr> <tr><td>-u filename</td> <td>判断文件是否存在，并且是否拥有 SUID 权限。</td></tr> <tr><td>-g filename</td> <td>判断文件是否存在，并且是否拥有 SGID 权限。</td></tr> <tr><td>-k filename</td> <td>判断该文件是否存在，并且是否拥有 SBIT 权限。</td></tr> <tr><td>文件比较</td> <td></td></tr> <tr><td>选 项</td> <td>作 用</td></tr> <tr><td>filename1 -nt filename2</td> <td>判断 filename1 的修改时间是否比 filename2 的新。</td></tr> <tr><td>filename -ot filename2</td> <td>判断 filename1 的修改时间是否比 filename2 的旧。</td></tr> <tr><td>filename1 -ef filename2</td> <td>判断 filename1 是否和 filename2 的 inode 号一致，可以理解为两个文件是否为同一个文件。这个判断用于判断硬链接是很好的方法</td></tr></tbody></table> <h2 id="_11-2-与数值比较相关的-test-选项"><a href="#_11-2-与数值比较相关的-test-选项" class="header-anchor">#</a> 11.2 与数值比较相关的 test 选项</h2> <table><thead><tr><th>选 项</th> <th>作 用</th></tr></thead> <tbody><tr><td>num1 -eq num2</td> <td>判断 num1 是否和 num2 相等。</td></tr> <tr><td>num1 -ne num2</td> <td>判断 num1 是否和 num2 不相等。</td></tr> <tr><td>num1 -gt num2</td> <td>判断 num1 是否大于 num2 。</td></tr> <tr><td>num1 -lt num2</td> <td>判断 num1 是否小于 num2。</td></tr> <tr><td>num1 -ge num2</td> <td>判断 num1 是否大于等于 num2。</td></tr> <tr><td>num1 -le num2</td> <td>判断 num1 是否小于等于 num2。</td></tr></tbody></table> <blockquote><p>注意，test 只能用来比较整数，小数相关的比较还得依赖 bc 命令。</p></blockquote> <h2 id="_11-3-与字符串判断相关的-test-选项"><a href="#_11-3-与字符串判断相关的-test-选项" class="header-anchor">#</a> 11.3 与字符串判断相关的 test 选项</h2> <table><thead><tr><th>选 项</th> <th>作 用</th></tr></thead> <tbody><tr><td>-z str</td> <td>判断字符串 str 是否为空。</td></tr> <tr><td>-n str</td> <td>判断宇符串 str 是否为非空。</td></tr> <tr><td>str1 = str2 str1 == str2</td> <td><code>=</code></td></tr></tbody></table> <p>和<code>==</code>
是等价的，都用来判断 str1 是否和 str2 相等。 |
| str1 != str2 | 判断 str1 是否和 str2 不相等。 |
| str1 &gt; str2 | 判断 str1 是否大于 str2。<code>\\&gt;</code>
是<code>&gt;</code>
的转义字符，这样写是为了防止<code>&gt;</code>
被误认为成重定向运算符。 |
| str1 &lt; str2 | 判断 str1 是否小于 str2。同样，<code>\\&lt;</code>
也是转义字符。 |</p> <h2 id="_11-4-与逻辑运算相关的-test-选项"><a href="#_11-4-与逻辑运算相关的-test-选项" class="header-anchor">#</a> 11.4 与逻辑运算相关的 test 选项</h2> <table><thead><tr><th>选 项</th> <th>作 用</th></tr></thead> <tbody><tr><td>expression1 -a expression</td> <td>逻辑与，表达式 expression1 和 expression2 都成立，最终的结果才是成立的。</td></tr> <tr><td>expression1 -o expression2</td> <td>逻辑或，表达式 expression1 和 expression2 有一个成立，最终的结果就成立。</td></tr> <tr><td>!expression</td> <td>逻辑非，对 expression 进行取反。</td></tr></tbody></table> <h1 id="_12-详解"><a href="#_12-详解" class="header-anchor">#</a> 12. [[]]详解</h1> <p><code>[[ ]]</code>是 Shell 内置关键字，它和 test 命令类似，也用来检测某个条件是否成立。
test 能做到的，[[ ]] 也能做到，而且 [[ ]] 做的更好；test 做不到的，[[ ]] 还能做到。可以认为 [[ ]] 是 test 的升级版，对细节进行了优化，并且扩展了一些功能。
[[ ]] 的用法为：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span><span class="token punctuation">[</span> expression <span class="token punctuation">]</span><span class="token punctuation">]</span>
</code></pre></div><p>当 [[ ]] 判断 expression 成立时，退出状态为 0，否则为非 0 值。注意<code>[[ ]]</code>和<code>expression</code>之间的空格，这两个空格是必须的，否则会导致语法错误。</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/guide/other/Linux/Linux基础.html" class="prev">
        Linux基础
      </a></span> <span class="next"><a href="/guide/other/project-manage/git.html">
        Git
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.7bd49d80.js" defer></script><script src="/assets/js/2.63c13255.js" defer></script><script src="/assets/js/70.868370f7.js" defer></script>
  </body>
</html>
